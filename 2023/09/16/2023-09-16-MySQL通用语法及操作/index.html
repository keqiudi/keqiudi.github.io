<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>MySQL通用语法及操作 | THEDI的仓库</title><meta name="keywords" content="MySQL"><meta name="author" content="THEDI"><meta name="copyright" content="THEDI"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="MySQL通用语法及操作"><meta name="application-name" content="MySQL通用语法及操作"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="MySQL通用语法及操作"><meta property="og:url" content="https://www.thekqd.top/2023/09/16/2023-09-16-MySQL%E9%80%9A%E7%94%A8%E8%AF%AD%E6%B3%95%E5%8F%8A%E6%93%8D%E4%BD%9C/index.html"><meta property="og:site_name" content="THEDI的仓库"><meta property="og:description" content="MySQL的相关知识包括基础篇、进阶篇和运维篇,学习自黑马"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://www.thekqd.top/assets/2.webp"><meta property="article:author" content="THEDI"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.thekqd.top/assets/2.webp"><meta name="description" content="MySQL的相关知识包括基础篇、进阶篇和运维篇,学习自黑马"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://www.thekqd.top/2023/09/16/2023-09-16-MySQL%E9%80%9A%E7%94%A8%E8%AF%AD%E6%B3%95%E5%8F%8A%E6%93%8D%E4%BD%9C/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="manifest" href="/manifest.json"/><meta name="msapplication-TileColor" content="var(--anzhiyu-main)"/><link rel="mask-icon" href="/img/siteicon/apple-icon-180.png" color="#5bbad5"/><link rel="apple-touch-icon" sizes="180x180" href="/img/siteicon/apple-icon-180.png"/><link rel="apple-touch-icon-precomposed" sizes="180x180" href="/img/siteicon/apple-icon-180.png"/><link rel="icon" type="image/png" sizes="32x32" href="/img/siteicon/32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/img/siteicon/16.png"/><link rel="bookmark" href="/img/siteicon/apple-icon-180.png"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-2732.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2732-2048.jpg" media="(device-width: 1024px) and (device-height: 1366px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2388.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2388-1668.jpg" media="(device-width: 834px) and (device-height: 1194px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1536-2048.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2048-1536.jpg" media="(device-width: 768px) and (device-height: 1024px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1668-2224.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2224-1668.jpg" media="(device-width: 834px) and (device-height: 1112px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1620-2160.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2160-1620.jpg" media="(device-width: 810px) and (device-height: 1080px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1290-2796.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2796-1290.jpg" media="(device-width: 430px) and (device-height: 932px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1179-2556.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2556-1179.jpg" media="(device-width: 393px) and (device-height: 852px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1284-2778.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2778-1284.jpg" media="(device-width: 428px) and (device-height: 926px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1170-2532.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2532-1170.jpg" media="(device-width: 390px) and (device-height: 844px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1125-2436.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2436-1125.jpg" media="(device-width: 375px) and (device-height: 812px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2688.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2688-1242.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-828-1792.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1792-828.jpg" media="(device-width: 414px) and (device-height: 896px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1242-2208.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-2208-1242.jpg" media="(device-width: 414px) and (device-height: 736px) and (-webkit-device-pixel-ratio: 3) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-750-1334.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1334-750.jpg" media="(device-width: 375px) and (device-height: 667px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-640-1136.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: portrait)"/><link rel="apple-touch-startup-image" href="/img/siteicon/apple-splash-1136-640.jpg" media="(device-width: 320px) and (device-height: 568px) and (-webkit-device-pixel-ratio: 2) and (orientation: landscape)"/><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@1.0.17/lib/assets/font-awesome-animation.min.css#fontawesome_animation 如果有就会加载，示例值：https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@1.0.17/lib/assets/font-awesome-animation.min.css"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: {"enable":true,"title":"与大家一起进步","addFriendPlaceholder":"昵称（请勿包含博客等字样）：\n网站地址（要求博客地址，请勿提交个人主页）：\n头像图片url（请提供尽可能清晰的图片，我会上传到我自己的图床）：\n描述：\n站点截图（可选）：\n"},
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"该回来学习啦！","backTitle":"w(ﾟДﾟ)w快认真学习！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🏠 智能家居小能手"]},
  algolia: {"appId":"PW49GHYJ6T","apiKey":"42b04be58e36cfebeb6ac1989c6e8009","indexName":"hexo","hits":{"per_page":6},"languages":{"input_placeholder":"输入关键词后按下回车查找","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    simplehomepage: false,
    post: true
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: THEDI","link":"链接: ","source":"来源: THEDI的仓库","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'THEDI的仓库',
  title: 'MySQL通用语法及操作',
  postAI: '',
  pageFillDescription: '基础篇, SQL通用语法, SQL分类, SQL数据类型, SQL运算符, SQL七大约束, DDL(数据库操作和表操作), 数据库操作, 查询, 创建, 删除, 使用, 查看, 修改, 表操作, 查询, 创建, 修改, 删除, DML(数据操作), 添加, 修改数据, DQL(查询), 基础查询, 条件查询, 聚合函数, 分组查询, 排序查询, 分页查询, DQL执行顺序, DCL(管理), 用户管理, 查询用户, 创建用户, 修改用户密码, 删除用户, 权限控制, 查询权限, 授予权限, 撤销权限, 函数, 字符串函数, CONCAT, LOWER, UPPER, LPAD, RPAD, TRIM, SUBSTRING, 数值函数, CEIL, FLOOR, MOD, RAND, ROUND, 日期函数, CURDATE, CURTIME, NOW, YEAR, MONTH, DAY, DATE_ADD, DATEDIFF, 流程函数, IF, IFNULL, CASE WHEN, 多表关系, 概述, 内连接, 外连接, 左外连接, 右外连接, 自连接, 联合查询, 子查询, 标量子查询, 列子查询, 行子查询, 表子查询, 事务简介, 事务操作, 方式一, 方式二, 事务的四大特性(ACID), 并发事务问题, 事务隔离级别, 进阶篇, 索引, 索引结构, 索引分类, 索引语法, 创建索引, 查看索引, 修改索引, 删除索引, 视图, 视图语法, 视图的检查选项, CASCADED(级联), LOCAL基础篇通用语法语句可以单行或多行书写使用回车可换行继续书写最后以分号结尾语句可以使用空格缩进来增加语句的可读性数据库的语句不区分大小写关键字建议使用大写注释单行注释注释内容或注释内容特有多行注释注释内容分类数据定义语言用来定义数据库对象数据库表字段数据操作语言用来对数据库表中的数据进行增删改数据查询语言用来查询数据库中表的记录数据控制语言用来创建数据库的用户控制数据库的访问权限数据类型见这篇字段类型最全解析行者的博客博客运算符学习之运算符运算符有哪些的博客博客七大约束约束条件用法参考这篇基础表的七大约束表级约束小杨的博客博客数据库操作和表操作数据库操作查询查看所有数据库查询当前数据库创建数据库名字符集排序规则这个单词在写代码的时候可以加也可以不加最好加上例删除数据库名使用数据库名查看数据库名结果会显示出创建命令和各参数设置字符集校对规则修改数据库名字符集排序规则注意用户必须有数据库的修改权限才能使用该命令修改数据库表操作查询查询当前数据库所有表查询表结构表明查询指定表的建表语句表名会显示出详细注释引擎字符集校对规则创建表名字段字段类型约束条件字段注释字段字段类型约束条件字段注释字段字段类型约束条件字段注释字段字段类型字段注释表注释例子编号姓名用户表表名和字段只能用反引号或不用符号不能用单引号最后一个字段结尾不要有逗号后的字段注释或表注释必须使用引号而且是单引号而不是反引号修改添加字段表名字段名类型长度注释约束修改添加修改指定字段数据类型表名字段名新数据类型长度修改修改字段数据名和字段类型表名旧字段名新字段名类型长度注释约束修改删除字段表名字段名修改表名表名新表名删除删除表表名数据全部删除删除指定表并重新创建该表表名数据全部删除结构不变数据操作添加给指定字段添加一条数据表名字段名字段名字段名值值值给全部字段添加一条数据表名值值批量添加多条数据表名字段名字段名字段名值值值值值值值值值指定字段添加多份数据表名值值值值值值值值值所有字段添加多份数据注意插入数据时指定的字段顺序需要与值的顺序是一一对应的字符串和日期型型数据应该包含在引号中插入的数据大小应该在字段的规定范围内修改数据修改表名字段名值字段名值条件例将为的字段数据修改为注意修改语句的条件可以有也可以没有如果没有条件则会修改整张表的所有数据删除表名条件例删除为女的员工女删除所有员工注意语句的条件可以有也可以没有如果没有条件则会删除整张表的所有数据语句不能删除某一个字段的值但可以使用查询基础查询查询多个字段字段字段表名表名代表查询所有的字段设置别名字段别名字段别名表名可省略对字段起别名字段别名为字段取别名对表取别名为表取别名去除重复记录字段列表表名条件查询字段列表表名条件列表条件运算符算数判断不等于判断是否为逻辑范围最小值最大值值值之后的列表的值为范围模糊匹配表示代表一个字符表示各或多个字符表示某一范围的字符例如之间的字符表示不再某一范围的字符聚合函数介绍将一列数据作为一个整体进行纵向计算聚合函数统计元组数量行数最大值最小值平均值求和语法聚合函数字段列表聚合函数表名所有的值不参与所有聚合函数运算对某个字段中有在使用时将不会计算数据条数统计的是表中所有的行数字段是统计该字段非的行数一般使用前者较多分组查询语法字段列表表名条件分组字段名分组后过滤条件和的区别执行时机不同是分组之前进行过滤不满足条件不参与分组而是分组之后对结果的过滤判断条件不同不能对聚合函数进行判断而可以注意执行顺序聚合函数分组之后查询的字段一般为聚合函数和分组字段查询其他字段无任何意义排序查询语法字段列表表名字段排序方式字段二排序方式排序方式升序默认值降序注意如果是多字段排序当第一个字段值相同时才会根据第二个字段进行排序分页查询语法字段列表表名起始索引偏移量查询记录数一般加在所有代码的最后注意起始索引从开始起始索引查询页码每页显示记录数起始索引也叫偏移量表示从起始索引所在行数的下一行开始查询分页查询是数据库的方言不同的数据库有不同的实现中是如果查询的是第一页数据起始索引可以省略直接简写为执行顺序执行顺序了解了执行顺序后我们就可以知道哪些部分可以使用别名来访问数据哪些不能使用例如若取别名执行成功先执行为取别名再执行若取别名错误语句在之后执行在执行之前没有这个别名管理用户管理查询用户创建用户用户名主机名密码设置任意主机访问该数据库用户名密码设置只能在本机访问数据库用户名密码修改用户密码用户名主机名新密码删除用户用户名主机名注意主机名可以使用通配这类开发人员操作的比较少主要是数据库管理员使用权限控制查询权限用户名主机名授予权限权限列表数据库名表名用户名主机名代表所有的权限数据库代表所有的表代表所有数据库的所有表撤销权限权限列表数据库名表名用户名主机名代表所有的权限代表所有的表代表所有数据库的所有表注意多个权限之间使用逗号分隔授权时数据库名和表名可以使用进行通配代表所有函数十大常用字符串函数的博客博客字符串函数常用的函数将字符串拼接拼接成一个字符串返回该字符串将字符串全部转换为小写返回该函数将字符串全部转换为大写返回该函数左填充用字符串对的左边进行填充达到个字符串长度代表用填充左边的得到一共五个字符下面的同理右填充用字符串对的右边进行填充达到个字符串长度去掉字符串头部和尾部的空格不除去中间返回从字符串从位置起的个长度的字符串数值函数向上取整向下取整返回的模返回内的随机数求参数的四舍五入的值保留位小数日期函数返回当前日期年月日返回当前时间返回当前日期和时间获取指定的年份获取指定的月份获取指定的日期返回一个日期时间值加上一个时间间隔后的时间值指定数字指定类型年月日例天之后的时间个月之后的时间返回起始时间和结束时间之间的天数一般用于求入职入学时间等流程函数如果为则返回否则返回类似三目运算符如果不为返回否则返回用于聚合函数的筛选例求成绩大于分才有学分求同学的总学分学号姓名这里的会判断如果分就会返回即计算学分和如果不满足则会返回就不会计算该值如果表达式字段的值等于返回否则返回默认值一般用于给出具体的条件的值例查询表的员工姓名和工作地址如果工作地址在北京上海则标明一线城市其他则为二线城市北京一线城市上海一线城市二线城市工作地址如果为返回否则返回默认值一般用于范围例如统计成绩分以上为优秀分以上为及格分以下为不及格优秀及格不及格数学优秀及格不及格英语优秀及格不及格语文其中三个字段使用了流程函数使出来的值进行了指定多表关系项目开发中在进行数据库表结构设计师会根据业务需求及业务模块之间的关系分析并设计表结构由于业务之间相互关联所有各个表结构之间也存在着各种联系基本分为三种一对多多对一案例部门与员工的关系关系一个部门对应多个员工一个员工对应多个部门实现在多的一方建立外键指向一的一方主键多对多案例学生与课程的关系关系一个学生可以选修多么课程一门课程也可以供多个学生选择实现建立第三张中间表中间表至少包含两个外键分别关联两方主键一对一案例用户与用户详情的关系关系一对一关系多用于单表拆分将一张表的基础字段放在一张表中其他详细字段放在另一张表中以提升操作效率实现在任意一方加入外键关联另一方的主键并设置外键为唯一的多表查询概述概述指从多张表中查询数据笛卡尔积笛卡尔乘积是指在数学中两个集合集合和集合的所有组合情况在多表查询时需要消除无效的笛卡尔积后面这个就可以保证出来的两个对应连接条件为内连接内连接将两张表连接起来内连接查询的是两张表的交集的部分隐式内连接字段列表表表条件不使用内连接实现方式显示内连接写法一字段列表表表连接条件表连接条件写法二字段列表表表表连接条件连接条件外连接左外连接字段列表表表条件表连接条件注相当于查询左表表的所有数据包含表和表交集部分的数据右外连接字段列表表表条件表连接条件注相当于查询右表表的所有数据包含表和表交集部分的数据注意左外连接可以和右外连接互相转换只需要交换字段位置外连接和内连接的区别内连接只会展示两张表的交集部分当连接的部分中没有原表中的某条数据即为时就不会显示出来而外连接可以将某一张表的所有数据和交集部分显示出来即可以显示想要知道的自连接字段列表表别名表别名条件一定要将该表取两个别名看成两张表自连接查询可以是内连接查询也可以是外连接查询联合查询把多次查询的结果合并起来形成一个新的查询结果集字段列表表字段列表表例子有可能会导致有重复但去掉只用则会去除相同的注意对于联合查询的多张表的列数必须保持一致字段类型也需要保持一致会将全部的数据直接合并在一起会对合并之后的数据去重只能单表查询而可以多表查询子查询概念语句中嵌套语句成为嵌套查询又称子查询子查询外部的语句可以是的任何一个根据子查询结果不同分为标量子查询子查询结果为单个值列子查询子查询结果为一列行子查询子查询结果为一行表子查询子查询结果为多行多列根据子查询位置分为之后之后之后标量子查询子查询返回的结果是单个值数字字符串日期等是最简单的形式这种子查询称为标量子查询常用的操作符例如查询销售部的所有员工信息和名称在两张表我们分为两步查询销售部部门销售部根据销售部的部门查询员工信息使用标量子查询合并之后就是销售部列子查询子查询返回的结果是一列可以是多行这种子查询成为列子查询常用的操作符在指定的集合范围之内多选一不在指定的集合范围之内子查询返回列表中有任意一个满足即可与等同使用的地方都可以使用子查询返回列表的所有值都必须满足也可进行相关子查询但不返回任何实际数据只得到真或假例列子查询查询销售部和市场部的所有员工信息销售部市场部查询比财务部所有人工资都高的员工信息查询所有财务部人员工资财务部比财务部所有人工资都高的员工信息财务部查询比研发部任意一人工资高的员工该信息查询研发部所有人工资研发部比研发部其中任意一人工资高的员工信息研发部表示存在的量词带有的子查询不返回任何实际数据它只得到逻辑值真或假当子查询的查询结果集合为非空时外层的子句返回真值否则返回假值与此相反查询学生的学号和姓名查询条件是学生没有选修课程号为的课程使用上述语句的执行过程是对于父查询中的每一位学生在子查询中查询是否选修了课程号为的课程如果没有选课记录说明子查询的结果集合为空则父查询中子句中的的返回逻辑值真从而该学生的信息会被被选取到父查询的结果集合中集合不为空则的返回逻辑值为假则该学生信息丢弃对父查询表中的每一位学生重复上述过程即可完成查询任务行子查询子查询返回的结果是一行可以是多列这种子查询成为行子查询常用的操作符行子查询查询与张无忌的薪资及直属领导相同的员工信息查询张无忌的薪资及直属领导张无忌查询与张无忌的薪资及直属领导相同的员工信息组合作为条件表示行子查询张无忌刚好是两条数据两两对应等号的组合写法表子查询子查询返回的结果是多行多列这种子查询称为表子查询常用操作符表子查询查询与的职位和薪资相同的员工信息查询的职位和薪资查询与的职位和薪资相同的员工信息组合写法事务简介事务是一组操作的集合它是一个不可分割的工作单位事务会把所有的操作作为一个整体一起向系统提交或撤销操作请求即这些操作要么同时成功要么同时失败事务操作方式一查看设置事务提交方式查看事务的自动提交方式为自动为手动设置系统变量的提交方式为自动为手动这种方法可作用于全局提交事务在设置了手动提交后任意的语句只有在语句之后使用了才会提交修改数据库否则不会修改回滚事务遇到异常时可以回滚已经执行的语句提交之后不能回滚方式二开启事务或这句话执行后代表开启事务代表我们要手动控制事务只要没有数据库就不会改变这种方法可作用于某些语句执行完成后事务自动关闭提交事务事务后代表事务完成了回滚事务事务的四大特性原子性事务是不可分割的最小操作单元要么全部成功要么全部失败一致性事务完成时必须使所有的数据都保持一致状态合理加减隔离性数据库系统提供的隔离机制保证事务在不受外部并发操作影响的独立环境下运行持久性事务一旦提交或回滚它对数据库中的数据的改变使永久的并发事务问题丢失更新两个事务读入同一数据并发执行修改操作时一个事务将另一个事务的修改覆盖导致这些修改好像丢失了一样读取脏数据脏读一个事务读到另外一个事务还没有提交的数据未不可重复读在一个事务中先后读取同一条数据但两次读取的数据不同称为不可重复读幻象读幻读一个事务按照条件查询数据时没有对应的数据行但是在插入数据时又发现这行数据已经存在了好像出现了幻影查询不可重复读现在分别开启两个事务第一次读取数据在第二次读取前事务修改了该数据导致该事务再次读取数据时数据与第一次读取不同事务始终没有结束如果解决了不可重复读在一个事务中两次读取同一个数据数据相同但在该事务结束后再读取数据就会更新了增删幻读在解决了不可重复读之后才会出现事务查询数据时没有对应的数据行准备插入但是在插入前插入了数据就会得到数据已经存在但是之后第二次查询又发现没有该数据行因为设置了可重复读解决不可重复读所以才会满足在同一个事务中两次读取到的数据应该是相同的但是实际数据确实存在事务隔离级别四种事务隔离级别从上到下性能降低安全升高通常要综合性能和安全选择隔离级别脏读不可重复读幻读会出现会出现会出现不会会会不会不会会不会不会不会默认可重复读默认未提交读提交读可重复读序列化串行化代表在进行并发事务操作时同一时间只能执行一个事务只有在该事务提交之后才能执行其他事务其他事务在这之前会被阻塞避免所有的并发问题查看事务隔离级别设置事务隔离级别会话级别代表针对当前客户端窗口有效某一个控制台代表所有客户端有效注意事务隔离级别越高数据越安全但是性能越低进阶篇索引索引是帮助高效获取数据的数据结构有序在数据之外数据库系统还维护着满足特定查找算法的数据结构这些数据结构以某种方式引用指向数据这样就可以在这些数据结构上实现高级查找算法这种数据结构就是索引优点提高数据检索的效率降低数据库的成本通过索引列对数据进行排序降低数据排序的成本降低的消耗缺点索引列需要占用空间索引大大提高了查询效率同时却也降低更新表的速度如对表进行时效率降低索引结构的索引是在储存引擎层实现的不同的储存引擎有不同的结构主要包含以下几种索引最常见的索引类型大部分引擎都支持树索引索引底层数据结构是用哈希表实现的只有精确匹配索引列的查询才有效不支持范围查询空间索引是引擎的一个特殊索引类型主要用于地理空间数据类型通常使用较少是一种通过建立倒排索引快速匹配文档的方式类似于我们平常所说的索引如果没有特别指明都是指树结构组织的索引二叉树二叉树缺点顺序插入时会形成一个链表查询性能大大降低大数据量的情况下层级较深检索速度慢红黑树大数据量的情况下层级较深检索速度慢多路平衡查找树以一颗最大度数为个子节点的为例每个节点最多储存四个个指针指针数插入为例动态变化的过程可以参考网站索引分类主键索引针对于表中主键创建的索引建表时默认自动创建只能有一个关键字是唯一索引避免同一个表中某数据列中的值重复可以有多个关键字常规索引快速定位特定的数据可以有多个全文索引全文索引查找的是文本中的关键词而不是比较索引中的值可以有多个关键字空间索引使用了关键字的索引适用于等空间类型数据的列在储存引擎中根据索引的存储形式又可以分为以下两种聚集索引将数据存储与索引放到了一块索引结构的叶子节点保存了行数据记录必须有而且只有一个二级索引将数据与索引分开存储索引结构的叶子节点关联的是对应的主键可以存在多个聚集索引的选取规则如果存在主键主键索引就是聚集索引如果不存在主键将使用第一个唯一索引作为聚集索引如果表中没有主键或没有适合的唯一索引则会自动生成一个作为隐藏的聚集索引回表查询先根据字段对应的二级索引去查对应的主键值在根据主键对应的聚集索引去查行数据索引语法创建索引字段名索引字符长度一个索引可关联多个字段不加可选项或代表默认创建常规索引以字段为姓名字段该字段的值可能会重复为该字段创建索引以字段为姓名字段该字段的值可能会重复且索引针对的前个字符以降序排序为该字段创建索引手机号字段的值是非空且唯一的为该字段创建唯一索引为创建联合索引联合索引中字段索引是有讲究的为建立合适的索引来提升查询效率可以在建表时创建索引表名字段数据类型列约束注释字段数据类型列约束注释表约束字段名索引字符长度字段名索引字符长度例在表约束后可以使用关键字为表创建索引与用法相同语句可以一次附带多个索引不同索引间使用逗号分隔创建索引时无需提供表名而是使用语句创建索引时要指明表名查看索引查看表的索引修改索引索引三不同索引的创建方式主键索引普通索引唯一键索引博客删除索引例删除的索引视图介绍视图是一种虚拟存在的表视图中的数据并不在数据库中实际存在行和列数据来自定义视图的查询中使用的表并且是在使用视图时动态生成的通俗的讲视图只保存了查询的逻辑不保存查询结果所以我们在创建视图的时候主要的工作就落在创建这条查询语句上视图语法创建视图名称列名列表语句或替代可选项查询查看创建视图的语句视图名称查看视图数据把视图当作表来查可以像操作表一样来操作视图视图名称例修改视图方式一关键在上修改必须加视图名称列名列表语句方式二视图名称列名列表语句删除视图视图名称视图的检查选项当使用子句创建视图时会通过视图检查正在更改的每个行例如插入更新删除以使符合视图的定义允许基于另一个视图创建视图它还会检查依赖视图中的规则以保持一致性为了确定检查的范围提供了两个选项和默认值为级联注意只有添加了的视图才会在插入时进行条件的检查没有检查时直接会添加成功到表插入的数据是存放到基表中的视图中不存放数据级联会去递归检查当前视图以及创建时依赖的视图并且看是否加了检查选项如果其依赖的视图中没有加入检查选项则会将向下传递使其向下的视图都加上检查选项使其都能检查创建一个视图成功添加到中添加成功到中用搜索该视图中找不到该数据添加选项后添加失败因为故会阻止该数据的添加由于使用检查选项则也会继承到该检查选项插入成功插入成功没有检查选项不会检查插入失败没有检查选项直接到依赖视图中中有检查选项并且是满足递归进入中由于继承到了会进行判断不满足阻止该数据插入会去递归检查当前视图以及创建时依赖的视图并且看是否加了检查选项如果有则进行条件的检查看是否满足条件如果没有则不进行检查继续递归创建视图没有依赖视图没有检查选项创建视图依赖于视图没有检查选项创建视图依赖于视图设置检查选项由于设置了检查选项该语句会先判断如果没设置就不会判断而是会直接进入中然后递归到发现没有添加检查选项则不进行判断如果添加了则会判断再依次递归到直到没有依赖其他视图建立的视图为止如果任意一次条件判断不满足则会插入失败',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-05-31 12:05:24',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://i.postimg.cc/fbN6bFqP/20220206101541-14a48.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="安知鱼的博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="安知鱼的博客"/><span class="back-menu-item-text">安知鱼的博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/keqiudi/keqiudi.github.io" title="我的博客仓库"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="我的博客仓库"/><span class="back-menu-item-text">我的博客仓库</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">THEDI的仓库</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/null"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/null"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/C/" style="font-size: 1.05rem;">C++<sup>2</sup></a><a href="/tags/CLion/" style="font-size: 1.05rem;">CLion<sup>1</sup></a><a href="/tags/Git/" style="font-size: 1.05rem;">Git<sup>1</sup></a><a href="/tags/Linux/" style="font-size: 1.05rem;">Linux<sup>8</sup></a><a href="/tags/MySQL/" style="font-size: 1.05rem;">MySQL<sup>2</sup></a><a href="/tags/QT/" style="font-size: 1.05rem;">QT<sup>1</sup></a><a href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/" style="font-size: 1.05rem;">嵌入式<sup>7</sup></a><a href="/tags/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/" style="font-size: 1.05rem;">构建工具<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.05rem;">算法<sup>3</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/06/"><span class="card-archive-list-date">六月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/05/"><span class="card-archive-list-date">五月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/01/"><span class="card-archive-list-date">一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/02/"><span class="card-archive-list-date">二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/12/"><span class="card-archive-list-date">十二月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">七月 2023</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/MySQL/" itemprop="url">MySQL</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/MySQL/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>MySQL</span></a></span></div></div><h1 class="post-title" itemprop="name headline">MySQL通用语法及操作</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2023-09-16T09:09:12.000Z" title="发表于 2023-09-16 17:09:12">2023-09-16</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-05-31T04:05:24.602Z" title="更新于 2025-05-31 12:05:24">2025-05-31</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="anzhiyufont anzhiyu-icon-file-word post-meta-icon" title="文章字数"></i><span class="post-meta-label" title="文章字数">字数总计:</span><span class="word-count" title="文章字数">9.4k</span><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-clock post-meta-icon" title="阅读时长"></i><span class="post-meta-label" title="阅读时长">阅读时长:</span><span>33分钟</span></span><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="MySQL通用语法及操作"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为成都"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>成都</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="/assets/2.webp"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://www.thekqd.top/2023/09/16/2023-09-16-MySQL%E9%80%9A%E7%94%A8%E8%AF%AD%E6%B3%95%E5%8F%8A%E6%93%8D%E4%BD%9C/"><header><a class="post-meta-categories" href="/categories/MySQL/" itemprop="url">MySQL</a><a href="/tags/MySQL/" tabindex="-1" itemprop="url">MySQL</a><h1 id="CrawlerTitle" itemprop="name headline">MySQL通用语法及操作</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">THEDI</span><time itemprop="dateCreated datePublished" datetime="2023-09-16T09:09:12.000Z" title="发表于 2023-09-16 17:09:12">2023-09-16</time><time itemprop="dateCreated datePublished" datetime="2025-05-31T04:05:24.602Z" title="更新于 2025-05-31 12:05:24">2025-05-31</time></header><h1 id="基础篇"><a href="#基础篇" class="headerlink" title="基础篇"></a>基础篇</h1><h2 id="SQL通用语法"><a href="#SQL通用语法" class="headerlink" title="SQL通用语法"></a>SQL通用语法</h2><ul>
<li>SQL语句可以单行或多行书写，使用回车可换行继续书写<strong>最后以分号结尾</strong>。</li>
<li>SQL语句可以使用空格&#x2F;缩进来增加语句的可读性。</li>
<li>MySQL数据库的SQL语句不区分大小写，关键字建议使用大写。</li>
<li>注释：</li>
<li>单行注释：– 注释内容 或 # 注释内容（MySQL特有）</li>
<li>多行注释：&#x2F;*注释内容*&#x2F;</li>
</ul>
<h2 id="SQL分类"><a href="#SQL分类" class="headerlink" title="SQL分类"></a>SQL分类</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">DDL<span class="punctuation">:</span> 数据定义语言，用来定义数据库对象（数据库，表，字段）</span><br><span class="line">DML<span class="punctuation">:</span> 数据操作语言，用来对数据库表中的数据进行增删改</span><br><span class="line">DQL<span class="punctuation">:</span> 数据查询语言，用来查询数据库中表的记录</span><br><span class="line">DCL<span class="punctuation">:</span> 数据控制语言，用来创建数据库的用户、控制数据库的访问权限</span><br></pre></td></tr></table></figure>

<h2 id="SQL数据类型"><a href="#SQL数据类型" class="headerlink" title="SQL数据类型"></a>SQL数据类型</h2><p>见这篇blog-&gt;<a target="_blank" rel="noopener" href="https://blog.csdn.net/wangkun_j/article/details/113500282?ops_request_misc=%7B%22request_id%22:%22169493216516800197069763%22,%22scm%22:%2220140713.130102334..%22%7D&request_id=169493216516800197069763&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-2-113500282-null-null.142%5Ev94%5EchatsearchT3_1&utm_term=mysql%E5%AD%97%E6%AE%B5%E7%B1%BB%E5%9E%8B&spm=1018.2226.3001.4187">MySQL字段类型最全解析_kun_行者的博客-CSDN博客</a></p>
<h2 id="SQL运算符"><a href="#SQL运算符" class="headerlink" title="SQL运算符"></a>SQL运算符</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/heart2070292037/article/details/122562132?ops_request_misc=%7B%22request_id%22:%22169522393616800180688568%22,%22scm%22:%2220140713.130102334..%22%7D&request_id=169522393616800180688568&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_click~default-1-122562132-null-null.142%5Ev94%5EchatsearchT3_1&utm_term=sql%E8%BF%90%E7%AE%97%E7%AC%A6&spm=1018.2226.3001.4187">SQL学习之运算符_sql运算符有哪些_heart-szu的博客-CSDN博客</a></p>
<h2 id="SQL七大约束"><a href="#SQL七大约束" class="headerlink" title="SQL七大约束"></a>SQL七大约束</h2><p><strong>约束条件用法参考这篇blog</strong><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_64338546/article/details/128547998?ops_request_misc=&request_id=&biz_id=102&utm_term=mysql%E7%BA%A6%E6%9D%9F&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-4-128547998.nonecase&spm=1018.2226.3001.4187">【MySQL基础】MySQL表的七大约束_mysql 表级约束_小杨MiManchi的博客-CSDN博客</a></p>
<h2 id="DDL-数据库操作和表操作"><a href="#DDL-数据库操作和表操作" class="headerlink" title="DDL(数据库操作和表操作)"></a>DDL(数据库操作和表操作)</h2><h3 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h3><h4 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h4><p><strong>查看所有数据库：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> DATABASES;</span><br></pre></td></tr></table></figure>

<p><strong>查询当前数据库：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> DATABASE();</span><br></pre></td></tr></table></figure>



<h4 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE<span class="operator">|</span>SCHEMA [IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] 数据库名 [<span class="keyword">DEFAULT</span> (CHARSET)<span class="operator">|</span>(<span class="keyword">CHARACTER SET</span>) 字符集] [<span class="keyword">COLLATE</span> 排序规则];</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span><span class="keyword">DEFAULT</span>这个单词在写代码的时候可以加也可以不加,最好加上</span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line"><span class="keyword">CREATE</span> DATABASE IF <span class="keyword">NOT</span> ETISTS teaching</span><br><span class="line"><span class="keyword">DEFAULT</span> <span class="keyword">CHARACTER SET</span> utf8mb4</span><br><span class="line"><span class="keyword">DEFAULT</span> <span class="keyword">COLLATE</span> utf8mb4_0900_ai_ci;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> DATABASE [IF <span class="keyword">EXISTS</span>] 数据库名;</span><br></pre></td></tr></table></figure>



<h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">USE 数据库名;</span><br></pre></td></tr></table></figure>



<h4 id="查看"><a href="#查看" class="headerlink" title="查看"></a>查看</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> DATABASE 数据库名</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>结果会显示出创建命令和各参数设置(字符集，校对规则)</span><br></pre></td></tr></table></figure>



<h4 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> DATABASE<span class="operator">|</span>SCHEMA [IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] 数据库名 [<span class="keyword">DEFAULT</span> (CHARSET)<span class="operator">|</span>(<span class="keyword">CHARACTER SET</span>) 字符集] [<span class="keyword">COLLATE</span> 排序规则];</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>注意：用户必须有数据库的修改权限才能使用该命令修改数据库</span><br></pre></td></tr></table></figure>

<h3 id="表操作"><a href="#表操作" class="headerlink" title="表操作"></a>表操作</h3><h4 id="查询-1"><a href="#查询-1" class="headerlink" title="查询"></a>查询</h4><p>查询当前数据库所有表</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> TABLES;</span><br></pre></td></tr></table></figure>

<p>查询表结构</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DESC</span> 表明;</span><br></pre></td></tr></table></figure>

<p>查询指定表的建表语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE TABLE</span> 表名;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>会显示出详细注释，引擎，字符集，校对规则</span><br></pre></td></tr></table></figure>



<h4 id="创建-1"><a href="#创建-1" class="headerlink" title="创建"></a>创建</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE TABLE</span> 表名(</span><br><span class="line">    字段<span class="number">1</span> 字段<span class="number">1</span>类型 [约束条件] [COMMENT <span class="string">&#x27;字段1注释&#x27;</span>],</span><br><span class="line">    字段<span class="number">2</span> 字段<span class="number">2</span>类型 [约束条件] [COMMENT <span class="string">&#x27;字段2注释&#x27;</span>],</span><br><span class="line">    字段<span class="number">3</span> 字段<span class="number">3</span>类型 [约束条件] [COMMENT <span class="string">&#x27;字段3注释&#x27;</span>],</span><br><span class="line">    ...</span><br><span class="line">    字段n 字段n类型 [COMMENT 字段n注释]</span><br><span class="line">)[COMMENT 表注释];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">例子:</span><br><span class="line"><span class="keyword">create table</span> tb_user(</span><br><span class="line">    id <span class="type">int</span> comment <span class="string">&#x27;编号&#x27;</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">50</span>) comment <span class="string">&#x27;姓名&#x27;</span></span><br><span class="line">    ) comment <span class="string">&#x27;用户表&#x27;</span>;</span><br></pre></td></tr></table></figure>

<div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><ul>
<li>表名和字段只能用反引号或不用符号，<strong>不能用单引号</strong></li>
<li>最后一个字段结尾不要有逗号</li>
<li>comment后的字段注释或表注释必须使用引号，而且<strong>是单引号</strong>而不是反引号</li>
</ul>
</div>



<h4 id="修改-1"><a href="#修改-1" class="headerlink" title="修改"></a>修改</h4><p><strong>添加字段</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER TABLE</span> 表名 <span class="keyword">ADD</span> 字段名 类型(长度) [COMMENT 注释] [约束];</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span><span class="keyword">alter</span>: 修改</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span><span class="keyword">add</span>: 添加</span><br></pre></td></tr></table></figure>



<p><strong>修改指定字段数据类型</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER TABLE</span> 表名 MODIFY 字段名 新数据类型(长度);</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>modify: 修改</span><br></pre></td></tr></table></figure>



<p><strong>修改字段数据名和字段类型</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER TABLE</span> 表名 CHANGE 旧字段名 新字段名 类型(长度) [COMMENT 注释] [约束];</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>change: 修改</span><br></pre></td></tr></table></figure>



<p><strong>删除字段</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER TABLE</span> 表名 <span class="keyword">DROP</span> 字段名;</span><br></pre></td></tr></table></figure>



<p><strong>修改表名</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER TABLE</span> 表名 RENAME <span class="keyword">TO</span> 新表名;</span><br></pre></td></tr></table></figure>



<h4 id="删除-1"><a href="#删除-1" class="headerlink" title="删除"></a>删除</h4><p><strong>删除表</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> [IF <span class="keyword">EXISTS</span>] 表名;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>数据全部删除</span><br></pre></td></tr></table></figure>

<p><strong>删除指定表，并重新创建该表</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> 表名;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>数据全部删除，结构不变</span><br></pre></td></tr></table></figure>



<h2 id="DML-数据操作"><a href="#DML-数据操作" class="headerlink" title="DML(数据操作)"></a>DML(数据操作)</h2><h3 id="添加"><a href="#添加" class="headerlink" title="添加"></a>添加</h3><ul>
<li><strong>给指定字段添加一条数据</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span><span class="operator">|</span>REPLACE <span class="keyword">INTO</span> 表名(字段名<span class="number">1</span>，字段名<span class="number">2</span>，字段名<span class="number">3</span>,..) <span class="keyword">VALUES</span>(值<span class="number">1</span>，值<span class="number">2</span>，值<span class="number">3</span>，..);</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>给全部字段添加一条数据</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span><span class="operator">|</span>REPLACE <span class="keyword">INTO</span> 表名 <span class="keyword">VALUES</span>(值<span class="number">1</span>，值<span class="number">2</span>，...);</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>批量添加多条数据</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span><span class="operator">|</span>REPLACE <span class="keyword">INTO</span> 表名(字段名<span class="number">1</span>，字段名<span class="number">2</span>，字段名<span class="number">3</span>,..) <span class="keyword">VALUES</span>(值<span class="number">1</span>，值<span class="number">2</span>，值<span class="number">3</span>，..),(值<span class="number">1</span>，值<span class="number">2</span>，值<span class="number">3</span>，..),(值<span class="number">1</span>，值<span class="number">2</span>，值<span class="number">3</span>，..);</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>指定字段添加多份数据</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT INTO</span> 表名 <span class="keyword">VALUES</span>(值<span class="number">1</span>，值<span class="number">2</span>，值<span class="number">3</span>，..),(值<span class="number">1</span>，值<span class="number">2</span>，值<span class="number">3</span>，..),(值<span class="number">1</span>，值<span class="number">2</span>，值<span class="number">3</span>，..);</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>所有字段添加多份数据</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p>注意：</p>
<ul>
<li><strong>插入数据时，指定的字段顺序需要与值的顺序是一一对应的。</strong></li>
<li><strong>字符串和日期型(date型)数据应该包含在引号中</strong></li>
<li><strong>插入的数据大小应该在字段的规定范围内</strong></li>
</ul>
</div>

<h3 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h3><p><strong>修改</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> 表名 <span class="keyword">SET</span> 字段名<span class="number">1</span><span class="operator">=</span>值<span class="number">1</span>, 字段名<span class="number">2</span><span class="operator">=</span>值<span class="number">2</span>,...[<span class="keyword">WHERE</span> 条件]；</span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line"><span class="keyword">update</span> test <span class="keyword">set</span> name <span class="operator">=</span> <span class="string">&#x27;kqd&#x27;</span> <span class="keyword">where</span> id<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>将id为<span class="number">1</span>的字段name数据修改为kqd</span><br></pre></td></tr></table></figure>

<div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p>注意：</p>
<ul>
<li>修改语句的条件可以有，也可以没有，<strong>如果没有条件，则会修改整张表的所有数据。</strong></li>
</ul>
</div>



<p><strong>删除</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> 表名 [<span class="keyword">WHERE</span> 条件]</span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>删除gender为女的员工</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> employee <span class="keyword">where</span> gender <span class="operator">=</span> <span class="string">&#x27;女&#x27;</span>;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>删除所有员工</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> employee;</span><br></pre></td></tr></table></figure>

<div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p>注意：</p>
<ul>
<li><strong>DELETE语句的条件可以有，也可以没有，如果没有条件，则会删除整张表的所有数据。</strong></li>
<li><strong>DELETE语句不能删除某一个字段的值(但可以使用UPDATE)。</strong></li>
</ul>
</div>

<h2 id="DQL-查询"><a href="#DQL-查询" class="headerlink" title="DQL(查询)"></a>DQL(查询)</h2><h3 id="基础查询"><a href="#基础查询" class="headerlink" title="基础查询"></a>基础查询</h3><p>1.查询多个字段</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段<span class="number">1</span>，字段<span class="number">2.</span>.. <span class="keyword">FROM</span> 表名；</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> 表名 ; </span><br><span class="line"></span><br><span class="line"><span class="operator">*</span>代表查询所有的字段</span><br></pre></td></tr></table></figure>

<p>2.设置别名</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段<span class="number">1</span> [<span class="keyword">AS</span> 别名<span class="number">1</span>]，字段<span class="number">2</span> [<span class="keyword">AS</span> 别名<span class="number">2</span>]... <span class="keyword">FROM</span> 表名；</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span><span class="keyword">AS</span> 可省略</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 对字段起别名 </span></span><br><span class="line"><span class="keyword">select</span> 字段<span class="number">1</span> <span class="keyword">as</span> <span class="string">&#x27;别名&#x27;</span>,...</span><br><span class="line">为字段<span class="number">1</span>取别名</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 对表取别名</span></span><br><span class="line"><span class="keyword">select</span> a.name</span><br><span class="line"><span class="keyword">from</span> student <span class="keyword">as</span> a</span><br><span class="line">为student表取别名a</span><br></pre></td></tr></table></figure>

<p>3.去除重复记录</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> 字段列表 <span class="keyword">FROM</span> 表名;</span><br></pre></td></tr></table></figure>



<h3 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表名 <span class="keyword">WHERE</span> 条件列表;</span><br></pre></td></tr></table></figure>



<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">条件:</span><br><span class="line">运算符</span><br><span class="line"><span class="number">1.</span>算数</span><br><span class="line"><span class="operator">+</span>, <span class="operator">-</span>, <span class="operator">*</span>, <span class="operator">/</span></span><br><span class="line"><span class="comment">/********************/</span></span><br><span class="line"><span class="number">2.</span>判断</span><br><span class="line"><span class="operator">&gt;</span>, <span class="operator">&lt;</span>, <span class="operator">&gt;=</span>, <span class="operator">&lt;=</span>, <span class="operator">!=</span>, <span class="operator">&lt;&gt;</span>(不等于) </span><br><span class="line"><span class="keyword">IS</span> <span class="keyword">NULL</span><span class="operator">|</span><span class="keyword">IS</span> <span class="keyword">NOT NULL</span>(判断是否为<span class="keyword">NULL</span>)</span><br><span class="line"><span class="comment">/********************/</span></span><br><span class="line"><span class="number">3.</span>逻辑 </span><br><span class="line"><span class="keyword">AND</span>(<span class="operator">&amp;&amp;</span>), <span class="keyword">OR</span>(<span class="operator">||</span>),<span class="keyword">NOT</span><span class="operator">||</span><span class="operator">!</span></span><br><span class="line"><span class="comment">/********************/</span></span><br><span class="line"><span class="number">4.</span>范围 </span><br><span class="line"><span class="keyword">BETWEEN</span> 最小值 <span class="keyword">AND</span> 最大值,</span><br><span class="line"><span class="keyword">IN</span>(值<span class="number">1</span>，值<span class="number">2</span>，...)  <span class="operator">/</span><span class="operator">/</span><span class="keyword">IN</span>之后的列表的值为范围</span><br><span class="line"><span class="number">5.</span>模糊匹配 </span><br><span class="line"><span class="keyword">LIKE</span> <span class="string">&#x27;_||%||&#x27;</span></span><br><span class="line"><span class="string">&#x27;_&#x27;</span> 表示代表一个字符</span><br><span class="line"><span class="string">&#x27;%&#x27;</span> 表示<span class="number">0</span>各或多个字符</span><br><span class="line"><span class="string">&#x27;[]&#x27;</span> 表示某一范围的字符,例如[<span class="number">0</span><span class="number">-9</span>],<span class="number">0</span><span class="operator">~</span><span class="number">9</span>之间的字符</span><br><span class="line"><span class="string">&#x27;[^]&#x27;</span> 表示不再某一范围的字符</span><br><span class="line"><span class="comment">/********************/</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h3><p><strong>介绍:</strong></p>
<p>将一列数据作为一个整体，进行纵向计算</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">聚合函数：</span><br><span class="line"><span class="built_in">count</span>() 统计元组数量（行数）</span><br><span class="line"><span class="built_in">max</span>() 最大值</span><br><span class="line"><span class="built_in">min</span>() 最小值</span><br><span class="line"><span class="built_in">avg</span>() 平均值</span><br><span class="line"><span class="built_in">sum</span>() 求和</span><br></pre></td></tr></table></figure>

<p><strong>语法:</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 聚合函数(字段列表),聚合函数,... <span class="keyword">FROM</span> 表名;</span><br></pre></td></tr></table></figure>

<div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><ul>
<li><strong>所有的NULL值不参与所有聚合函数运算，对某个字段中有NULL在使用count时将不会计算数据条数。</strong></li>
<li><strong>count(*)统计的是表中所有的行数,count(字段)是统计该字段非NULL的行数,一般使用前者较多</strong></li>
</ul>
</div>

<h3 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h3><p><strong>语法：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表名 [<span class="keyword">WHERE</span> 条件] GEOUP <span class="keyword">BY</span> 分组字段名 [<span class="keyword">HAVING</span> 分组后过滤条件]</span><br></pre></td></tr></table></figure>

<div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><strong>where和having的区别:</strong></p>
<p>执行时机不同: where是分组之前进行过滤，不满足where条件，不参与分组；而having是分组之后对结果的过滤。</p>
<p>判断条件不同：where不能对聚合函数进行判断，而having可以。</p>
</div>

<p>注意：</p>
<ul>
<li>执行顺序：where &gt; 聚合函数 &gt; having.</li>
<li>分组之后，<strong>查询的字段一般为聚合函数和分组字段，查询其他字段无任何意义</strong></li>
</ul>
<h3 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h3><p><strong>语法:</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表名 <span class="keyword">ORDER</span> <span class="keyword">BY</span> 字段<span class="number">1</span> 排序方式<span class="number">1</span>，字段二 排序方式</span><br><span class="line"></span><br><span class="line">排序方式:</span><br><span class="line"><span class="keyword">ASC</span>: 升序（默认值）</span><br><span class="line"><span class="keyword">DESC</span>: 降序</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：如果是多字段排序，当第一个字段值相同时，才会根据第二个字段进行排序。</p>
<h3 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h3><p><strong>语法：</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表名 LIMIT 起始索引(偏移量)，查询记录数</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 一般LIMIT加在所有代码的最后</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<ul>
<li><p><strong>起始索引从0开始，起始索引 &#x3D; (查询页码-1) * 每页显示记录数，起始索引也叫偏移量，表示从起始索引所在行数的下一行开始查询</strong></p>
</li>
<li><p><strong>分页查询是数据库的方言，不同的数据库有不同的实现，MySQL中是LIMIT</strong></p>
</li>
<li><p><strong>如果查询的是第一页数据，起始索引可以省略，直接简写为LIMIT 10。</strong></p>
</li>
</ul>
<h3 id="DQL执行顺序"><a href="#DQL执行顺序" class="headerlink" title="DQL执行顺序"></a>DQL执行顺序</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">执行顺序:了解了执行顺序后我们就可以知道哪些部分可以使用别名来访问数据，哪些不能使用</span><br><span class="line"><span class="number">1.</span><span class="keyword">FROM</span></span><br><span class="line"><span class="number">2.</span><span class="keyword">WHERE</span></span><br><span class="line"><span class="number">3.</span><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line"><span class="number">4.</span><span class="keyword">HAVING</span></span><br><span class="line"><span class="number">5.</span><span class="keyword">SELECT</span></span><br><span class="line"><span class="number">6.</span><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line"><span class="number">7.</span>LIMIT</span><br><span class="line"></span><br><span class="line">例如：</span><br><span class="line"><span class="keyword">select</span> name,age <span class="keyword">from</span> emp <span class="keyword">where</span> age<span class="operator">&gt;</span><span class="number">15</span> <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">ASC</span>;</span><br><span class="line"></span><br><span class="line">若取别名 <span class="keyword">select</span> e.name,e.age <span class="keyword">from</span> emp <span class="keyword">as</span> e age <span class="keyword">where</span> e.age<span class="operator">&gt;</span><span class="number">15</span> <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">ASC</span>;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>执行成功，先执行<span class="keyword">from</span>为emp取别名e，再执行<span class="keyword">where</span>,<span class="keyword">select</span></span><br><span class="line"></span><br><span class="line">若取别名<span class="keyword">select</span> e.name <span class="keyword">AS</span> ename, e.age <span class="keyword">AS</span> eage <span class="keyword">from</span> emp <span class="keyword">AS</span> e age <span class="keyword">where</span> eage<span class="operator">&gt;</span><span class="number">15</span> <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">ASC</span>;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>错误，<span class="keyword">select</span>语句在<span class="keyword">where</span>之后执行，在执行<span class="keyword">select</span>之前没有eage这个别名</span><br></pre></td></tr></table></figure>

<h2 id="DCL-管理"><a href="#DCL-管理" class="headerlink" title="DCL(管理)"></a>DCL(管理)</h2><h3 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h3><h4 id="查询用户"><a href="#查询用户" class="headerlink" title="查询用户"></a>查询用户</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">USE mysql;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> <span class="keyword">user</span>;</span><br></pre></td></tr></table></figure>



<h4 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;密码&#x27;</span> </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>设置任意主机访问该数据库</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;#&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;密码&#x27;</span></span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>设置只能在本机访问数据库</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;密码&#x27;</span></span><br></pre></td></tr></table></figure>



<h4 id="修改用户密码"><a href="#修改用户密码" class="headerlink" title="修改用户密码"></a>修改用户密码</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">USER</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span> IDENTIFIED <span class="keyword">WITH</span> mysql_native_password <span class="keyword">BY</span> <span class="string">&#x27;新密码&#x27;</span></span><br></pre></td></tr></table></figure>



<h4 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span>;</span><br></pre></td></tr></table></figure>

<div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><strong>注意：</strong></p>
<ul>
<li><strong>主机名可以使用%通配</strong></li>
<li><strong>这类SQL开发人员操作的比较少，主要是DBA （数据库管理员)使用</strong></li>
</ul>
</div>



<h3 id="权限控制"><a href="#权限控制" class="headerlink" title="权限控制"></a>权限控制</h3><h4 id="查询权限"><a href="#查询权限" class="headerlink" title="查询权限"></a>查询权限</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> GRANTS <span class="keyword">FOR</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span></span><br></pre></td></tr></table></figure>



<h4 id="授予权限"><a href="#授予权限" class="headerlink" title="授予权限"></a>授予权限</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> 权限列表 <span class="keyword">ON</span> 数据库名.表名 <span class="keyword">TO</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ALL</span><span class="operator">/</span><span class="keyword">all</span> 代表所有的权限</span><br><span class="line">数据库.<span class="operator">*</span> 代表所有的表</span><br><span class="line"><span class="operator">*</span>.<span class="operator">*</span> 代表所有数据库的所有表</span><br></pre></td></tr></table></figure>



<h4 id="撤销权限"><a href="#撤销权限" class="headerlink" title="撤销权限"></a>撤销权限</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> 权限列表 <span class="keyword">ON</span> 数据库名.表名 <span class="keyword">FROM</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;主机名&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ALL</span><span class="operator">/</span><span class="keyword">all</span> 代表所有的权限</span><br><span class="line"><span class="operator">*</span> 代表所有的表</span><br><span class="line"><span class="operator">*</span>.<span class="operator">*</span> 代表所有数据库的所有表</span><br></pre></td></tr></table></figure>



<div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><strong>注意：</strong></p>
<ul>
<li><strong>多个权限之间，使用逗号分隔</strong></li>
<li><strong>授权时，数据库名和表名可以使用*进行通配，代表所有</strong>,</li>
</ul>
</div>

<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/hzbooks/article/details/118561808?ops_request_misc=%7B%22request_id%22:%22169564664916800227428260%22,%22scm%22:%2220140713.130102334..%22%7D&request_id=169564664916800227428260&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduend~default-2-118561808-null-null.142%5Ev94%5Einsert_down1&utm_term=mysql%E5%B8%B8%E7%94%A8%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0&spm=1018.2226.3001.4187">MySQL 十大常用字符串函数_hzbooks的博客-CSDN博客</a></p>
<h3 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h3><p>常用的函数:</p>
<h4 id="CONCAT"><a href="#CONCAT" class="headerlink" title="CONCAT"></a>CONCAT</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CONCAT(s1,s2,..sn)</span><br><span class="line">将字符串拼接，S1,S2,...Sn拼接成一个字符串，返回该字符串</span><br></pre></td></tr></table></figure>



<h4 id="LOWER"><a href="#LOWER" class="headerlink" title="LOWER"></a>LOWER</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">LOWER</span>(str) </span><br><span class="line">将字符串str全部转换为小写,返回该函数</span><br></pre></td></tr></table></figure>

<h4 id="UPPER"><a href="#UPPER" class="headerlink" title="UPPER"></a>UPPER</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UPPER</span>(str)</span><br><span class="line">将字符串str全部转换为大写,返回该函数</span><br></pre></td></tr></table></figure>

<h4 id="LPAD"><a href="#LPAD" class="headerlink" title="LPAD"></a>LPAD</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">LPAD(str,n,pad)</span><br><span class="line">左填充，用字符串pad对str的左边进行填充，达到n个字符串长度</span><br><span class="line"></span><br><span class="line">lpad(<span class="string">&#x27;01&#x27;</span>,<span class="number">5</span>,<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">代表用<span class="string">&#x27;-&#x27;</span>填充左边的得到<span class="string">&#x27;---01&#x27;</span>,一共五个字符，下面的rpad同理</span><br></pre></td></tr></table></figure>

<h4 id="RPAD"><a href="#RPAD" class="headerlink" title="RPAD"></a>RPAD</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RPAD(str,n,pad)</span><br><span class="line">右填充，用字符串pad对str的右边进行填充，达到n个字符串长度</span><br></pre></td></tr></table></figure>

<h4 id="TRIM"><a href="#TRIM" class="headerlink" title="TRIM"></a>TRIM</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">TRIM</span>(str)</span><br><span class="line">去掉字符串头部和尾部的空格(不除去中间)</span><br></pre></td></tr></table></figure>

<h4 id="SUBSTRING"><a href="#SUBSTRING" class="headerlink" title="SUBSTRING"></a>SUBSTRING</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">SUBSTRING</span>(str,<span class="keyword">start</span>,len)</span><br><span class="line">返回从字符串str从<span class="keyword">start</span>位置起的len个长度的字符串</span><br></pre></td></tr></table></figure>



<h3 id="数值函数"><a href="#数值函数" class="headerlink" title="数值函数"></a>数值函数</h3><h4 id="CEIL"><a href="#CEIL" class="headerlink" title="CEIL"></a>CEIL</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">CEIL</span>()</span><br><span class="line">向上取整</span><br></pre></td></tr></table></figure>

<h4 id="FLOOR"><a href="#FLOOR" class="headerlink" title="FLOOR"></a>FLOOR</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">FLOOR</span>()</span><br><span class="line">向下取整</span><br></pre></td></tr></table></figure>

<h4 id="MOD"><a href="#MOD" class="headerlink" title="MOD"></a>MOD</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">MOD</span>(x,y)</span><br><span class="line">返回x<span class="operator">/</span>y的模</span><br></pre></td></tr></table></figure>

<h4 id="RAND"><a href="#RAND" class="headerlink" title="RAND"></a>RAND</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RAND()</span><br><span class="line">返回<span class="number">0</span><span class="operator">~</span><span class="number">1</span>内的随机数</span><br></pre></td></tr></table></figure>

<h4 id="ROUND"><a href="#ROUND" class="headerlink" title="ROUND"></a>ROUND</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ROUND(x,y)</span><br><span class="line">求参数x的四舍五入的值，保留y位小数</span><br></pre></td></tr></table></figure>



<h3 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h3><h4 id="CURDATE"><a href="#CURDATE" class="headerlink" title="CURDATE"></a>CURDATE</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curdate()</span><br><span class="line">返回当前日期,年<span class="operator">-</span>月<span class="operator">-</span>日</span><br></pre></td></tr></table></figure>

<h3 id="CURTIME"><a href="#CURTIME" class="headerlink" title="CURTIME"></a>CURTIME</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curtime()</span><br><span class="line">返回当前时间</span><br></pre></td></tr></table></figure>

<h4 id="NOW"><a href="#NOW" class="headerlink" title="NOW"></a>NOW</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">now()</span><br><span class="line">返回当前日期和时间</span><br></pre></td></tr></table></figure>

<h4 id="YEAR"><a href="#YEAR" class="headerlink" title="YEAR"></a>YEAR</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">year</span>(<span class="type">date</span>)</span><br><span class="line">获取指定<span class="type">date</span>的年份</span><br></pre></td></tr></table></figure>

<h4 id="MONTH"><a href="#MONTH" class="headerlink" title="MONTH"></a>MONTH</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">month</span>(<span class="type">date</span>)</span><br><span class="line">获取指定<span class="type">date</span>的月份</span><br></pre></td></tr></table></figure>

<h4 id="DAY"><a href="#DAY" class="headerlink" title="DAY"></a>DAY</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">day</span>(<span class="type">date</span>)</span><br><span class="line">获取指定<span class="type">date</span>的日期</span><br></pre></td></tr></table></figure>

<h4 id="DATE-ADD"><a href="#DATE-ADD" class="headerlink" title="DATE_ADD"></a>DATE_ADD</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">DATE_ADD(<span class="type">date</span>,<span class="type">INTERVAL</span> expr type)</span><br><span class="line">返回一个日期<span class="operator">/</span>时间值加上一个时间间隔expr后的时间值</span><br><span class="line"></span><br><span class="line">expr 指定数字</span><br><span class="line">type 指定类型:年<span class="operator">/</span>月<span class="operator">/</span>日(<span class="keyword">DAY</span><span class="operator">/</span><span class="keyword">MONTH</span><span class="operator">/</span><span class="keyword">YEAR</span>)</span><br><span class="line">例：</span><br><span class="line">DATE_ADD(now(),<span class="type">INTERVAL</span> <span class="number">70</span> <span class="keyword">day</span>)<span class="comment">-- 70天之后的时间</span></span><br><span class="line">DATE_ADD(now(),<span class="type">INTERVAL</span> <span class="number">70</span> <span class="keyword">month</span>)<span class="comment">-- 70个月之后的时间</span></span><br></pre></td></tr></table></figure>

<h4 id="DATEDIFF"><a href="#DATEDIFF" class="headerlink" title="DATEDIFF"></a>DATEDIFF</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DATEDIFF(date1,date2)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 返回起始时间date1和结束时间date2</span></span><br><span class="line">之间的天数</span><br><span class="line"><span class="comment">-- 一般用于求入职，入学时间等</span></span><br></pre></td></tr></table></figure>



<h3 id="流程函数"><a href="#流程函数" class="headerlink" title="流程函数"></a>流程函数</h3><h4 id="IF"><a href="#IF" class="headerlink" title="IF"></a>IF</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">IF(<span class="keyword">value</span>,t,f)</span><br><span class="line">如果<span class="keyword">value</span>为<span class="literal">true</span>，则返回t，否则返回f</span><br><span class="line"><span class="comment">-- 类似三目运算符</span></span><br></pre></td></tr></table></figure>



<h4 id="IFNULL"><a href="#IFNULL" class="headerlink" title="IFNULL"></a>IFNULL</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">IFNULL(value1,value2)</span><br><span class="line">如果value1不为<span class="keyword">null</span>，返回value1，否则返回value2</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 用于聚合函数的筛选</span></span><br><span class="line"><span class="comment">-- 例： 求成绩大于60分才有学分，求同学的总学分</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> sno <span class="keyword">as</span> <span class="string">&#x27;学号&#x27;</span>,sn <span class="keyword">as</span> <span class="string">&#x27;姓名&#x27;</span>,<span class="built_in">sum</span>(IF(score<span class="operator">&gt;=</span><span class="number">60</span>,credit,<span class="keyword">NULL</span>)) <span class="keyword">from</span> s;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 这里的if会判断，如果score&gt;=60分就会返回credit，即sum(credit)计算学分和,如果不满足则会返回NULL，就不会计算该值</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="CASE-WHEN"><a href="#CASE-WHEN" class="headerlink" title="CASE WHEN"></a>CASE WHEN</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CASE</span> [expr] <span class="keyword">WHEN</span> [val1] <span class="keyword">THEN</span> [res1] ...<span class="keyword">ELSE</span>[<span class="keyword">default</span>] <span class="keyword">END</span></span><br><span class="line">如果expr(表达式<span class="operator">/</span>字段)的值等于val1，返回res1，...否则返回<span class="keyword">default</span>默认值</span><br><span class="line"><span class="comment">-- 一般用于给出具体的条件的值</span></span><br><span class="line"></span><br><span class="line">例：查询emp表的员工姓名和工作地址，如果工作地址在北京<span class="operator">/</span>上海，则标明一线城市，其他则为二线城市</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> </span><br><span class="line">	name,</span><br><span class="line">	(<span class="keyword">case</span> workaddress <span class="keyword">when</span> <span class="string">&#x27;北京&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;一线城市&#x27;</span> <span class="keyword">when</span> <span class="string">&#x27;上海&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;一线城市&#x27;</span> <span class="keyword">else</span> <span class="string">&#x27;二线城市&#x27;</span> <span class="keyword">end</span> ) <span class="keyword">as</span> <span class="string">&#x27;工作地址&#x27;</span></span><br><span class="line"><span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>





<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CASE</span> <span class="keyword">WHEN</span> [val <span class="number">1</span>] <span class="keyword">THEN</span> [RES1] ... <span class="keyword">ELSE</span> [<span class="keyword">default</span>] <span class="keyword">END</span></span><br><span class="line">如果val1为<span class="literal">true</span>，返回res1，...否则返回<span class="keyword">default</span>默认值</span><br><span class="line"><span class="comment">-- 一般用于范围</span></span><br><span class="line"></span><br><span class="line">例如：统计成绩，<span class="number">85</span>分以上为优秀，<span class="number">60</span>分以上为及格，<span class="number">60</span>分以下为不及格</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span></span><br><span class="line">	id,</span><br><span class="line">	name,</span><br><span class="line">	(<span class="keyword">case</span> <span class="keyword">when</span> math<span class="operator">&gt;=</span><span class="number">85</span> <span class="keyword">then</span> <span class="string">&#x27;优秀&#x27;</span> <span class="keyword">when</span> math<span class="operator">&gt;=</span><span class="number">60</span> <span class="keyword">then</span> <span class="string">&#x27;及格&#x27;</span> <span class="keyword">else</span> <span class="string">&#x27;不及格&#x27;</span> <span class="keyword">end</span> ) <span class="keyword">as</span> <span class="string">&#x27;数学&#x27;</span>,</span><br><span class="line">	(<span class="keyword">case</span> <span class="keyword">when</span> english<span class="operator">&gt;=</span><span class="number">85</span> <span class="keyword">then</span> <span class="string">&#x27;优秀&#x27;</span> <span class="keyword">when</span> math<span class="operator">&gt;=</span><span class="number">60</span> <span class="keyword">then</span> <span class="string">&#x27;及格&#x27;</span> <span class="keyword">else</span> <span class="string">&#x27;不及格&#x27;</span> <span class="keyword">end</span> ) <span class="keyword">as</span> <span class="string">&#x27;英语&#x27;</span>,</span><br><span class="line">	(<span class="keyword">case</span> <span class="keyword">when</span> chinese<span class="operator">&gt;=</span><span class="number">85</span> <span class="keyword">then</span> <span class="string">&#x27;优秀&#x27;</span> <span class="keyword">when</span> math<span class="operator">&gt;=</span><span class="number">60</span> <span class="keyword">then</span> <span class="string">&#x27;及格&#x27;</span> <span class="keyword">else</span> <span class="string">&#x27;不及格&#x27;</span> <span class="keyword">end</span> ) <span class="keyword">as</span> <span class="string">&#x27;语文&#x27;</span>,</span><br><span class="line"><span class="keyword">from</span> score;</span><br><span class="line"></span><br><span class="line">其中math，english，chinese 三个字段使用了流程函数,使<span class="keyword">select</span>出来的值进行了指定</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="多表关系"><a href="#多表关系" class="headerlink" title="多表关系"></a>多表关系</h2><p>项目开发中，在进行数据库表结构设计师，会根据业务需求及业务模块之间的关系，分析并设计表结构，由于业务之间相互关联，所有各个表结构之间也存在着各种联系，基本分为三种:</p>
<ul>
<li><p>一对多(多对一)</p>
<p>   案例：部门与 员工的关系</p>
<p>   关系：一个部门对应多个员工，一个员工对应多个部门</p>
</li>
</ul>
<p>​     实现：<strong>在多的一方建立外键，指向一的一方主键</strong></p>
<ul>
<li>多对多</li>
</ul>
<p>​		案例：学生与课程的关系</p>
<p>​		关系：一个学生可以选修多么课程，一门课程也可以供多个学生选择</p>
<p>​		实现：<strong>建立第三张中间表，中间表至少包含两个外键，分别关联两方主键</strong></p>
<ul>
<li><p>一对一</p>
<p>案例：用户与用户详情的关系</p>
<p>关系：一对一关系，多用于单表拆分，将一张表的基础字段放在一张表中，其他详细字段放在另一张表中,以提升操作效率</p>
<p>实现：<strong>在任意一方加入外键，关联另一方的主键，并设置外键为唯一的UNIQUE</strong></p>
</li>
</ul>
<p>多表查询</p>
<h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>概述：指从多张表中查询数据</p>
<p>笛卡尔积：笛卡尔乘积是指在数学中，两个集合A集合和B集合的所有组合情况。(<strong>在多表查询时，需要消除无效的笛卡尔积</strong>)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp,dept <span class="keyword">where</span> emp.dept_id <span class="operator">=</span> dept.id</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 后面这个where就可以保证出来的两个id对应</span></span><br><span class="line">连接条件为: emp.dept_id <span class="operator">=</span> dept.id</span><br></pre></td></tr></table></figure>



<h3 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h3><p><strong>内连接将两张表连接起来，内连接查询的是两张表的交集的部分</strong></p>
<p>隐式内连接</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表<span class="number">1</span>，表<span class="number">2</span> <span class="keyword">WHERE</span> 条件 ...;</span><br><span class="line"><span class="comment">-- 不使用内连接实现方式</span></span><br></pre></td></tr></table></figure>



<p>显示内连接</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 写法一</span></span><br><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表<span class="number">1</span> <span class="keyword">INNER</span> <span class="keyword">JOIN</span> 表<span class="number">2</span> <span class="keyword">ON</span> 连接条件 <span class="keyword">INNER</span> <span class="keyword">JOIN</span> 表<span class="number">3</span> <span class="keyword">ON</span> 连接条件...;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 写法二</span></span><br><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表<span class="number">1</span> <span class="keyword">INNER</span> <span class="keyword">JOIN</span> 表<span class="number">2</span> <span class="keyword">INNER</span> <span class="keyword">JOIN</span> 表<span class="number">3</span> <span class="keyword">ON</span> 连接条件 <span class="keyword">and</span> 连接条件 ...;</span><br></pre></td></tr></table></figure>



<h3 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h3><h4 id="左外连接"><a href="#左外连接" class="headerlink" title="左外连接"></a>左外连接</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表<span class="number">1</span> <span class="keyword">LEFT</span> (<span class="keyword">OUTER</span>) <span class="keyword">JOIN</span> 表<span class="number">2</span> <span class="keyword">ON</span> 条件 <span class="keyword">LEFT</span> (<span class="keyword">OUTER</span>) <span class="keyword">JOIN</span> 表<span class="number">3</span> <span class="keyword">ON</span> 连接条件...;</span><br></pre></td></tr></table></figure>



<p><strong>注：相当于查询左表(表1)的所有数据包含表1和表2交集部分的数据</strong></p>
<h4 id="右外连接"><a href="#右外连接" class="headerlink" title="右外连接"></a>右外连接</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表<span class="number">1</span> <span class="keyword">RIGHT</span> (<span class="keyword">OUTER</span>) <span class="keyword">JOIN</span> 表<span class="number">2</span> <span class="keyword">ON</span> 条件 <span class="keyword">RIGHT</span> (<span class="keyword">OUTER</span>) <span class="keyword">JOIN</span> 表<span class="number">3</span> <span class="keyword">ON</span> 连接条件...;</span><br></pre></td></tr></table></figure>



<p><strong>注：相当于查询右表(表2)的所有数据包含表1和表2交集部分的数据</strong></p>
<div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><strong>注意:</strong></p>
<ul>
<li><strong>左外连接可以和右外连接互相转换，只需要交换字段位置</strong></li>
<li>外连接和内连接的区别:<strong>内连接只会展示两张表的交集部分当连接的部分中没有原表中的某条数据，即为NULL时，就不会显示出来，而外连接可以将某一张表的所有数据和交集部分显示出来，即可以显示想要知道的NULL</strong></li>
</ul>
</div>

<h3 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a>自连接</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表A <span class="keyword">AS</span> 别名A <span class="keyword">JOIN</span> 表A <span class="keyword">AS</span> 别名B <span class="keyword">ON</span> 条件 ...;</span><br><span class="line"></span><br><span class="line">一定要将该表取两个别名，看成两张表</span><br></pre></td></tr></table></figure>

<p><strong>自连接查询，可以是内连接查询，也可以是外连接查询</strong></p>
<h3 id="联合查询"><a href="#联合查询" class="headerlink" title="联合查询"></a>联合查询</h3><p>把多次查询的结果合并起来，形成一个新的查询结果集</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表A ...</span><br><span class="line"><span class="keyword">UNION</span> [<span class="keyword">ALL</span>]</span><br><span class="line"><span class="keyword">SELECT</span> 字段列表 <span class="keyword">FROM</span> 表B ...;</span><br><span class="line"></span><br><span class="line">例子：</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> salary <span class="operator">&lt;</span> <span class="number">5000</span></span><br><span class="line"><span class="keyword">union</span> <span class="keyword">all</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> age <span class="operator">&gt;</span> <span class="number">50</span> </span><br><span class="line"></span><br><span class="line">有<span class="keyword">ALL</span>可能会导致有重复，但去掉<span class="keyword">ALL</span>只用<span class="keyword">union</span>则会去除相同的</span><br></pre></td></tr></table></figure>

<div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><strong>注意:</strong></p>
<ul>
<li><strong>对于联合查询的多张表的列数必须保持一致，字段类型也需要保持一致。</strong></li>
<li><strong>union all 会将全部的数据直接合并在一起，union会对合并之后的数据去重</strong></li>
<li><strong>or只能单表查询，而union可以多表查询</strong></li>
</ul>
</div>



<h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><ul>
<li>概念：SQL语句中嵌套SELECT语句，成为<strong>嵌套查询</strong>，又称<strong>子查询</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> t1 <span class="keyword">WHERE</span> column1 <span class="operator">=</span> (<span class="keyword">SELECT</span> column1 <span class="keyword">FROM</span> t2);</span><br><span class="line"></span><br><span class="line">子查询外部的语句可以是：<span class="keyword">INSERT</span><span class="operator">/</span><span class="keyword">UPDATE</span><span class="operator">/</span><span class="keyword">DELETE</span><span class="operator">/</span><span class="keyword">SELECT</span>的任何一个。</span><br></pre></td></tr></table></figure>



<ul>
<li><p>根据子查询结果不同，分为：</p>
<ul>
<li>标量子查询（子查询结果为单个值）</li>
<li>列子查询（子查询结果为一列）</li>
<li>行子查询（子查询结果为一行）</li>
<li>表子查询 （子查询结果为多行多列）</li>
</ul>
</li>
<li><p>根据子查询位置,分为：WHERE之后、FROM之后、SELECT之后。</p>
</li>
</ul>
<h4 id="标量子查询"><a href="#标量子查询" class="headerlink" title="标量子查询"></a>标量子查询</h4><p>子查询返回的结果是单个值(数字、字符串、日期等), 是最简单的形式，这种子查询称为<strong>标量子查询</strong></p>
<p>常用的操作符：<strong>&#x3D; ，&lt;&gt; ，&gt;， &gt;&#x3D;， &lt;， &lt;&#x3D;</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 例如:</span></span><br><span class="line"><span class="comment">-- 查询&#x27;销售部&#x27;的所有员工信息(id和名称在两张表)</span></span><br><span class="line"><span class="comment">-- 我们分为两步</span></span><br><span class="line"><span class="comment">-- 1.查询&#x27;销售部&#x27;部门ID</span></span><br><span class="line"><span class="keyword">select</span> id <span class="keyword">from</span> dept <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;销售部&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.根据销售部的部门ID，查询员工信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> dept_id <span class="operator">=</span> <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3.使用标量子查询合并之后就是</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> dept_id <span class="operator">=</span> (<span class="keyword">select</span> id <span class="keyword">from</span> dept <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;销售部&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="列子查询"><a href="#列子查询" class="headerlink" title="列子查询"></a>列子查询</h4><p>子查询返回的结果是一列(可以是多行), 这种子查询成为列子查询。</p>
<p>常用的操作符： <strong>IN 、NOT IN 、ANY 、SOME 、ALL、EXISTS</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">IN</span> ：在指定的集合范围之内  ，多选一</span><br><span class="line"><span class="keyword">NOT</span> <span class="keyword">IN</span> ： 不在指定的集合范围之内</span><br><span class="line"><span class="keyword">ANY</span> ：子查询返回列表中，有任意一个满足即可</span><br><span class="line"><span class="keyword">SOME</span> ： 与<span class="keyword">ANY</span>等同，使用<span class="keyword">SOME</span>的地方都可以使用<span class="keyword">ANY</span></span><br><span class="line"><span class="keyword">ALL</span> : 子查询返回列表的所有值都必须满足</span><br><span class="line"><span class="keyword">EXISTS</span>: 也可进行相关子查询，但不返回任何实际数据，只得到真或假</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">例：</span><br><span class="line"><span class="comment">-- 列子查询</span></span><br><span class="line"><span class="comment">-- 1.查询&#x27;销售部&#x27;和&#x27;市场部&#x27;的所有员工信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> dept_id <span class="keyword">in</span> (<span class="keyword">select</span> id <span class="keyword">from</span> dept <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;销售部&#x27;</span> <span class="keyword">or</span> name <span class="operator">=</span> <span class="string">&#x27;市场部&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2.查询比财务部所有人工资都高的员工信息</span></span><br><span class="line"><span class="comment">-- a. 查询所有财务部人员工资</span></span><br><span class="line"><span class="keyword">select</span> salary <span class="keyword">from</span> <span class="keyword">where</span> dept_id <span class="operator">=</span> (<span class="keyword">select</span> id <span class="keyword">from</span> dept <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;财务部&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- b. 比财务部所有人工资都高的员工信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> salary <span class="operator">&gt;</span> <span class="keyword">ALL</span>(<span class="keyword">select</span>  salary <span class="keyword">from</span> <span class="keyword">where</span> dept_id <span class="operator">=</span> (<span class="keyword">select</span> id <span class="keyword">from</span> dept <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;财务部&#x27;</span>)salary )</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 3.查询比研发部任意一人工资高的员工该信息</span></span><br><span class="line"><span class="comment">-- a. 查询研发部所有人工资</span></span><br><span class="line"><span class="keyword">select</span> salary <span class="keyword">from</span> <span class="keyword">where</span> dept_id <span class="operator">=</span> (<span class="keyword">select</span> id <span class="keyword">from</span> dept <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;研发部&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- b. 比研发部其中任意一人工资高的员工信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> salary <span class="operator">&gt;</span> <span class="keyword">ANY</span> (<span class="keyword">select</span> salary <span class="keyword">from</span> <span class="keyword">where</span> dept_id <span class="operator">=</span> (<span class="keyword">select</span> id <span class="keyword">from</span> dept <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;研发部&#x27;</span>))</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- exist 表示存在的量词，带有exists的子查询不返回任何实际数据，它只得到逻辑值&quot;真&quot;或&quot;假&quot;。当子查询的查询结果集合为非空时，外层的WHERE子句返回真值，否则返回假值。NOT EXISTS与此相反。</span></span><br><span class="line"><span class="comment">-- 查询学生的学号和姓名，查询条件是学生没有选修课程号为&quot;c1&quot;的课程（使用exist）</span></span><br><span class="line"><span class="keyword">select</span> sno,sn <span class="keyword">from</span> s <span class="keyword">where</span> <span class="keyword">not</span> <span class="keyword">exists</span>(<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> sc <span class="keyword">where</span> sno <span class="operator">=</span> s.sno <span class="keyword">AND</span> cno <span class="operator">=</span> <span class="string">&#x27;C1&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 上述语句的执行过程是，对于父查询中的每一位学生，在子查询中查询是否选修了课程号为C1的课程，如果没有选课记录，说明子查询的结果集合为空，则父查询中WHERE子句中的not exists的返回逻辑值&quot;真&quot;,从而该学生的信息会被被选取到父查询的结果集合中,集合不为空，则not exists的返回逻辑值为&quot;假&quot;，则该学生信息丢弃。对父查询表s中的每一位学生重复上述过程，即可完成查询任务</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="行子查询"><a href="#行子查询" class="headerlink" title="行子查询"></a>行子查询</h4><p>子查询返回的结果是一行（可以是多列），这种子查询成为<strong>行子查询</strong></p>
<p>常用的操作符：<strong>&#x3D; ，&lt;&gt; ，IN、NOT IN</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 行子查询</span></span><br><span class="line"><span class="comment">-- 1.查询与&#x27;张无忌&#x27;的薪资及直属领导相同的员工信息</span></span><br><span class="line"><span class="comment">-- a. 查询张无忌的薪资及直属领导</span></span><br><span class="line"><span class="keyword">select</span> salary,managerid <span class="keyword">from</span> emp <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;张无忌&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- b. 查询与&#x27;张无忌&#x27;的薪资及直属领导相同的员工信息</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> salary <span class="operator">=</span> <span class="number">12500</span> <span class="keyword">and</span> managerid <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 组合作为条件</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> (salary,managerid) <span class="operator">=</span> (<span class="number">12500</span>,<span class="number">1</span>);</span><br><span class="line"><span class="comment">-- 表示salary =12500，managerid = 1 </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 行子查询</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> (salary,managerid) <span class="operator">=</span> (<span class="keyword">select</span> salary,managerid <span class="keyword">from</span> emp <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;张无忌&#x27;</span>);</span><br><span class="line"><span class="comment">-- 刚好是两条数据两两对应，等号的组合写法</span></span><br></pre></td></tr></table></figure>

<h4 id="表子查询"><a href="#表子查询" class="headerlink" title="表子查询"></a>表子查询</h4><p>子查询返回的结果是多行多列，这种子查询称为<strong>表子查询</strong></p>
<p>常用操作符: <strong>IN</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 表子查询</span></span><br><span class="line"><span class="comment">-- 1. 查询与 &#x27;lzk&#x27; ,&#x27;syq&#x27; 的职位和薪资相同的员工信息</span></span><br><span class="line"><span class="comment">-- a. 查询 lzk，syq的职位和薪资</span></span><br><span class="line"><span class="keyword">select</span> job,salary <span class="keyword">from</span> emp <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;lzk&#x27;</span> <span class="keyword">or</span> name <span class="operator">=</span> <span class="string">&#x27;lyq&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- b.查询与lzk，syq的职位和薪资相同的员工信息</span></span><br><span class="line"><span class="comment">-- 组合写法</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">from</span> emp <span class="keyword">where</span> (job,salary) <span class="keyword">in</span> (<span class="keyword">select</span> job,salary <span class="keyword">from</span> emp <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;lzk&#x27;</span> <span class="keyword">or</span> name <span class="operator">=</span> <span class="string">&#x27;lyq&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="事务简介"><a href="#事务简介" class="headerlink" title="事务简介"></a>事务简介</h2><p><strong>事务（transaction）<strong>是一组操作的集合，它是一个不可分割的工作单位，事务会把所有的操作作为一个整体一起向系统提交或撤销操作请求，即这些操作</strong>要么同时成功，要么同时失败</strong></p>
<h3 id="事务操作"><a href="#事务操作" class="headerlink" title="事务操作"></a>事务操作</h3><h4 id="方式一"><a href="#方式一" class="headerlink" title="方式一"></a>方式一</h4><ul>
<li>查看&#x2F;设置事务提交方式</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@autocommit</span>;</span><br><span class="line"><span class="comment">-- 查看事务的自动提交方式：1为自动，0为手动</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> @<span class="variable">@autocommit</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="comment">-- 设置系统变量的提交方式：1为自动，0为手动</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 这种方法可作用于全局</span></span><br></pre></td></tr></table></figure>



<ul>
<li>提交事务</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"><span class="comment">-- 在设置了手动提交后，任意的sql语句，只有在sql语句之后使用了commit才会提交修改数据库，否则不会修改</span></span><br></pre></td></tr></table></figure>



<ul>
<li>回滚事务</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">rollback</span>;</span><br><span class="line"><span class="comment">-- 遇到异常时可以回滚已经执行的sql语句</span></span><br><span class="line"><span class="comment">-- 提交之后不能回滚</span></span><br></pre></td></tr></table></figure>

<h4 id="方式二"><a href="#方式二" class="headerlink" title="方式二"></a>方式二</h4><ul>
<li>开启事务</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">START</span> TRANSACTION 或 <span class="keyword">BEGIN</span>;</span><br><span class="line"><span class="comment">-- 这句话执行后代表开启事务，代表我们要手动控制事务，只要没有commit数据库就不会改变、</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 这种方法可作用于某些语句,执行完成后事务自动关闭</span></span><br></pre></td></tr></table></figure>



<ul>
<li>提交事务</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"><span class="comment">-- commit事务后代表事务完成了</span></span><br></pre></td></tr></table></figure>



<ul>
<li>回滚事务</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">rollback</span>;</span><br></pre></td></tr></table></figure>

<h3 id="事务的四大特性-ACID"><a href="#事务的四大特性-ACID" class="headerlink" title="事务的四大特性(ACID)"></a>事务的四大特性(ACID)</h3><ul>
<li>原子性(Atomicity)：事务是不可分割的最小操作单元，要么全部成功，要么全部失败</li>
<li>一致性(Consistency)：事务完成时，必须使所有的数据都保持一致状态(合理加减)。</li>
<li>隔离性(Isolation)：数据库系统提供的隔离机制，保证事务在不受外部并发操作影响的独立环境下运行</li>
<li>持久性(Durability)：事务一旦提交或回滚，它对数据库中的数据的改变使永久的。</li>
</ul>
<h3 id="并发事务问题"><a href="#并发事务问题" class="headerlink" title="并发事务问题"></a>并发事务问题</h3><ul>
<li><p><strong>丢失更新</strong>：两个事务读入同一数据，并发执行修改操作时，一个事务将另一个事务的修改覆盖，导致这些修改好像丢失了一样</p>
</li>
<li><p><strong>读取脏数据(脏读)：<strong>一个事务读到另外一个事务</strong>还没有提交</strong>的数据(未commit)</p>
</li>
<li><p>**不可重复读：**在一个事务中先后读取同一条数据，但两次读取的数据不同，称为不可重复读。</p>
</li>
<li><p>**幻象读(幻读)：**一个事务按照条件查询数据时，没有对应的数据行，但是在插入数据时，又发现这行数据已经存在了，好像出现了”幻影”</p>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- (查询)不可重复读：现在分别开启A,B两个事务，A第一次读取数据，在A第二次读取前，B事务修改了该数据，导致该事务再次读取数据时数据与第一次读取不同(A事务始终没有结束)</span></span><br><span class="line"><span class="comment">-- 如果解决了不可重复读，在一个事务中，两次读取同一个数据，数据相同，但在该事务结束后，再读取，数据就会更新了</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- (增删)幻读: 在解决了不可重复读之后才会出现，A事务查询数据时，没有对应的数据行，A准备插入，但是在A插入前，B插入了数据,A就会得到数据已经存在，但是之后第二次查询，又发现没有该数据行。</span></span><br><span class="line"><span class="comment">-- 因为设置了可重复读（解决不可重复读），所以才会满足在同一个事务中两次读取到的数据应该是相同的，但是实际数据确实存在</span></span><br></pre></td></tr></table></figure>

<h3 id="事务隔离级别"><a href="#事务隔离级别" class="headerlink" title="事务隔离级别"></a>事务隔离级别</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 四种事务隔离级别，从上到下性能降低，安全升高</span></span><br><span class="line"><span class="comment">-- 通常要综合性能和安全选择隔离级别</span></span><br><span class="line"></span><br><span class="line">					脏读      不可重复读     幻读</span><br><span class="line">Read uncommitted:  会出现       会出现      会出现</span><br><span class="line">Read committed:     不会			会 		 会</span><br><span class="line">Repeatable Read:	不会			不会		 会</span><br><span class="line">Serializable:		不会			不会		不会</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- Mysql默认：Repeatable Read 可重复读</span></span><br><span class="line"><span class="comment">-- Oracle默认: Read committed</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- Read uncommitted：未提交读</span></span><br><span class="line"><span class="comment">-- Read committed：提交读</span></span><br><span class="line"><span class="comment">-- Repeatable Read：可重复读</span></span><br><span class="line"><span class="comment">-- Serializable：序列化(串行化)，代表在进行并发事务操作时，同一时间只能执行一个事务，只有在该事务提交之后，才能执行其他事务，其他事务在这之前会被阻塞,避免所有的并发问题</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看事务隔离级别</span></span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@TRANSACTION_ISOLATION</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 设置事务隔离级别</span></span><br><span class="line"><span class="keyword">SET</span> [SESSION<span class="operator">|</span><span class="keyword">GLOBAL</span>] TRANSACTION ISOLATION LEVEL [READ UNCOMMITTED<span class="operator">|</span> READ COMMITTED<span class="operator">|</span> REPEATABLE READ<span class="operator">|</span> SERIALIZABLE]</span><br><span class="line"></span><br><span class="line"><span class="comment">-- SESSION：会话级别,代表针对当前客户端窗口有效,某一个console控制台</span></span><br><span class="line"><span class="comment">-- GLOBAL：代表所有客户端有效</span></span><br></pre></td></tr></table></figure>



<ul>
<li><strong>注意事务隔离级别越高，数据越安全，但是性能越低</strong></li>
</ul>
<h1 id="进阶篇"><a href="#进阶篇" class="headerlink" title="进阶篇"></a>进阶篇</h1><h2 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h2><p>索引(index) 是帮助MySQL<strong>高效获取数据</strong>的<strong>数据结构(有序)</strong>。在数据之外，数据库系统还维护着满足特定查找算法的数据结构，这些数据结构以某种方式引用(指向)数据，这样就可以在这些数据结构上实现高级查找算法，这种数据结构就是索引。</p>
<p><strong>优点：</strong></p>
<ul>
<li><strong>提高数据检索的效率，降低数据库的IO成本</strong></li>
<li><strong>通过索引列对数据进行排序，降低数据排序的成本，降低CPU的消耗</strong></li>
</ul>
<p><strong>缺点：</strong></p>
<ul>
<li><strong>索引列需要占用空间</strong></li>
<li><strong>索引大大提高了查询效率，同时却也降低更新表的速度，如对表进行INSERT、UPDATE、DELETE时，效率降低</strong></li>
</ul>
<h3 id="索引结构"><a href="#索引结构" class="headerlink" title="索引结构"></a>索引结构</h3><p>MySQL的索引是在储存引擎层实现的，不同的储存引擎有不同的结构，主要包含以下几种：</p>
<ul>
<li><strong>B+Tree索引：最常见的索引类型，大部分引擎都支持B+树索引</strong></li>
<li><strong>Hash索引：底层数据结构是用哈希表实现的，只有精确匹配索引列的查询才有效，不支持范围查询</strong></li>
<li><strong>R-tree：空间索引是MyISAM引擎的一个特殊索引类型，主要用于地理空间数据类型，通常使用较少</strong></li>
<li><strong>Full-text：是一种通过建立倒排索引，快速匹配文档的方式，类似于Lucene，Solr，ES</strong></li>
</ul>
<div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><strong>我们平常所说的索引，如果没有特别指明，都是指B+树结构组织的索引。</strong></p>
</div>



<ul>
<li>二叉树</li>
</ul>
<p><strong>二叉树缺点：顺序插入时，会形成一个链表，查询性能大大降低。大数据量的情况下，层级较深，检索速度慢。</strong></p>
<p><strong>红黑树：大数据量的情况下，层级较深，检索速度慢。</strong></p>
<ul>
<li>B-Tree(<strong>多路</strong>平衡查找树)</li>
</ul>
<p>以一颗最大度数为5(5个子节点)的b-tree为例(每个节点最多储存四个key，5个指针)，指针数 &#x3D; key + 1</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">插入 <span class="number">100</span> <span class="number">65</span> <span class="number">169</span> <span class="number">368</span> <span class="number">900</span> <span class="number">556</span> <span class="number">780</span> <span class="number">35</span> <span class="number">215</span> <span class="number">1200</span> <span class="number">234</span> <span class="number">888</span> <span class="number">158</span> <span class="number">90</span> <span class="number">1000</span> <span class="number">88</span> <span class="number">120</span> <span class="number">268</span> <span class="number">250</span>  为例</span><br></pre></td></tr></table></figure>



<p>B-Tree 动态变化的过程可以参考网站：</p>
<p><a target="_blank" rel="noopener" href="https://www.cs.usfca.edu/~galles/visualization/BTree.html">B-Tree Visualization (usfca.edu)</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cs.usfca.edu/~galles/visualization/Algorithms.html">Data Structure Visualization (usfca.edu)</a></p>
<h3 id="索引分类"><a href="#索引分类" class="headerlink" title="索引分类"></a>索引分类</h3><ul>
<li><strong>主键索引</strong>：针对于表中主键创建的索引，建表时默认自动创建，只能有一个，关键字是PRIMARY。</li>
<li><strong>唯一索引</strong>：避免同一个表中某数据列中的值重复，可以有多个，关键字UNIQUE。</li>
<li><strong>常规索引</strong>：快速定位特定的数据，可以有多个。</li>
<li><strong>全文索引</strong>：全文索引查找的是文本中的关键词，而不是比较索引中的值，可以有多个，关键字FULLTEXT。</li>
<li><strong>空间索引：</strong> 使用了SPATIAL关键字的索引，适用于GEOMETRY ,POINT,POLYGON等空间类型数据的列</li>
</ul>
<p>在InnoDB储存引擎中，根据索引的存储形式，又可以分为以下两种：</p>
<ul>
<li>聚集索引(Clustered Index)：将数据存储与索引放到了一块，索引结构的叶子节点保存了行数据(记录)，<strong>必须有，而且只有一个</strong></li>
<li>二级索引(Secondary Index)：将数据与索引分开存储，索引结构的叶子节点关联的是对应的主键，<strong>可以存在多个</strong></li>
</ul>
<div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><strong>聚集索引的选取规则：</strong></p>
<ul>
<li>如果存在主键，主键索引就是聚集索引。</li>
<li>如果不存在主键，将使用第一个唯一(UNIQUE)索引作为聚集索引</li>
<li>如果表中没有主键，或没有适合的唯一索引，则InnoDB会自动生成一个rowid作为隐藏的聚集索引</li>
</ul>
</div>



<p>回表查询：先根据字段对应的二级索引去查对应的主键值，在根据主键对应的聚集索引去查行数据。</p>
<h3 id="索引语法"><a href="#索引语法" class="headerlink" title="索引语法"></a>索引语法</h3><h4 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [<span class="keyword">UNIQUE</span> <span class="operator">|</span> FULLTEXT <span class="operator">|</span> SPATIAL] INDEX index_name <span class="keyword">ON</span> table_name(字段名[(索引字符长度) [<span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span>]],...);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 一个索引可关联多个字段</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 不加可选项UNIQUE或FULLTEXT代表默认创建常规索引</span></span><br></pre></td></tr></table></figure>



<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 以name字段为姓名字段，该字段的值可能会重复，为该字段创建索引。</span></span><br><span class="line"><span class="keyword">create</span> index idx_user_name <span class="keyword">on</span> tb_user(name);</span><br><span class="line"></span><br><span class="line"><span class="comment">--  以name字段为姓名字段，该字段的值可能会重复，且索引针对name的前3个字符以降序排序,为该字段创建索引。</span></span><br><span class="line"><span class="keyword">create</span> index idx_user_name <span class="keyword">on</span> tb_user(name(<span class="number">3</span>) <span class="keyword">desc</span>);</span><br><span class="line"><span class="comment">-- phone手机号字段的值，是非空，且唯一的，为该字段创建唯一索引</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">UNIQUE</span> index idx_user_phone <span class="keyword">on</span> tb_user(phone);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 为profession、age、status创建联合索引</span></span><br><span class="line"><span class="keyword">create</span> index idx_user_pro_age_status <span class="keyword">on</span> tb_user(profession、age、status);</span><br><span class="line">联合索引中字段索引是有讲究的</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 为email建立合适的索引来提升查询效率</span></span><br><span class="line"><span class="keyword">create</span> index idx_user_email <span class="keyword">on</span> tb_user(email);</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>可以在建表时创建索引</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create table</span> 表名(</span><br><span class="line">	字段<span class="number">1</span> 数据类型 列约束 comment <span class="string">&#x27;注释&#x27;</span>,</span><br><span class="line">    字段<span class="number">2</span> 数据类型 列约束 comment <span class="string">&#x27;注释&#x27;</span>，</span><br><span class="line">    ...</span><br><span class="line">    [表约束]，</span><br><span class="line">    [<span class="keyword">UNIQUE</span> <span class="operator">|</span> FULLTEXT <span class="operator">|</span> SPATIAL] INDEX index_name(字段名[(索引字符长度) [<span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span>]],...),</span><br><span class="line">    ...</span><br><span class="line">     [<span class="keyword">UNIQUE</span> <span class="operator">|</span> FULLTEXT <span class="operator">|</span> SPATIAL] INDEX index_name(字段名[(索引字符长度) [<span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span>]],...),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 例:</span></span><br><span class="line"><span class="keyword">create table</span> classroom(</span><br><span class="line">	cid <span class="type">int</span> auto_increment,</span><br><span class="line">    crno <span class="type">varchar</span>(<span class="number">13</span>) <span class="keyword">not null</span>,</span><br><span class="line">    cbn <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not null</span>,</span><br><span class="line">    <span class="keyword">primary key</span>(cid),</span><br><span class="line">    <span class="keyword">unique</span> index cn_cb_index(crno,cbn)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>在表约束后，可以使用index关键字为表创建索引，与<span class="keyword">create</span> index用法相同。</span><br><span class="line"><span class="number">2.</span><span class="keyword">create table</span>语句可以一次附带多个索引，不同索引间使用逗号分隔</span><br><span class="line"><span class="number">3.</span><span class="keyword">create table</span>创建索引时无需提供表名，而是使用<span class="keyword">create</span> index语句创建索引时要指明表名</span><br></pre></td></tr></table></figure>

<h4 id="查看索引"><a href="#查看索引" class="headerlink" title="查看索引"></a>查看索引</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SHOW</span> INDEX <span class="keyword">FROM</span> table_name;</span><br></pre></td></tr></table></figure>



<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看tb_user表的索引</span></span><br><span class="line"><span class="keyword">show</span> index <span class="keyword">from</span> tb_user;</span><br></pre></td></tr></table></figure>

<h4 id="修改索引"><a href="#修改索引" class="headerlink" title="修改索引"></a>修改索引</h4><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/challenglistic/article/details/129166717">Mysql 索引（三）—— 不同索引的创建方式（主键索引、普通索引、唯一键索引）-CSDN博客</a></p>
<h4 id="删除索引"><a href="#删除索引" class="headerlink" title="删除索引"></a>删除索引</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> INDEX index_name <span class="keyword">ON</span> table_name;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 例：删除email的索引</span></span><br><span class="line"><span class="keyword">drop</span> index idx_user_email <span class="keyword">on</span> tb_user;</span><br></pre></td></tr></table></figure>

<h2 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h2><ul>
<li>介绍</li>
</ul>
<p>视图(view)是一种<strong>虚拟存在的表</strong>。视图中的数据并不在数据库中实际存在，行和列数据来自定义视图的查询中使用的表，并且是在使用视图时动态生成的。</p>
<p>通俗的讲，<strong>视图只保存了查询的SQL逻辑，不保存查询结果</strong>。所以我们在创建视图的时候，主要的工作就落在创建这条SQL查询语句上。</p>
<h3 id="视图语法"><a href="#视图语法" class="headerlink" title="视图语法"></a>视图语法</h3><ul>
<li><strong>创建</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [<span class="keyword">OR</span> REPLACE] <span class="keyword">VIEW</span> 视图名称[(列名列表)] <span class="keyword">AS</span> <span class="keyword">SELECT</span>语句 [<span class="keyword">WITH</span> [<span class="keyword">CASCADED</span> <span class="operator">|</span> <span class="keyword">LOCAL</span>] <span class="keyword">CHECK</span> OPTION]</span><br><span class="line"></span><br><span class="line"><span class="comment">-- OR REPLACE &#x27;或替代&#x27; , 可选项</span></span><br><span class="line"><span class="comment">-- </span></span><br></pre></td></tr></table></figure>



<ul>
<li><strong>查询</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看创建视图的语句</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">VIEW</span> 视图名称；</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看视图数据(把视图当作表来查，可以像操作表一样来操作视图)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> 视图名称 WHERE...;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 例</span></span><br><span class="line"><span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">view</span> stu_v_1;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stu_v_1；</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stu_v_1 <span class="keyword">where</span> id <span class="operator">&lt;</span> <span class="number">3</span>;</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>修改视图</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 方式一：关键在or replace上，修改必须加</span></span><br><span class="line"><span class="keyword">CREATE</span> [<span class="keyword">OR</span> REPLACE] <span class="keyword">VIEW</span> 视图名称[(列名列表)] <span class="keyword">AS</span> <span class="keyword">SELECT</span>语句 [<span class="keyword">WITH</span>[<span class="keyword">CASCADED</span> <span class="operator">|</span> <span class="keyword">LOCAL</span>] <span class="keyword">CHECK</span> OPTION]</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式二</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">VIEW</span> 视图名称[(列名列表)] <span class="keyword">AS</span> <span class="keyword">SELECT</span>语句 [<span class="keyword">WITH</span> [<span class="keyword">CASCADED</span> <span class="operator">|</span> <span class="keyword">LOCAL</span>] <span class="keyword">CHECK</span> OPTION]</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>删除视图</strong></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> [IF <span class="keyword">EXISTS</span>] 视图名称，... ;</span><br></pre></td></tr></table></figure>

<h3 id="视图的检查选项"><a href="#视图的检查选项" class="headerlink" title="视图的检查选项"></a>视图的检查选项</h3><p>当使用with check option子句创建视图时，MySQL会通过视图检查正在更改的每个行，例如 插入，更新，删除，以使符合视图的定义。<strong>MySQL允许基于另一个视图创建视图</strong>，它还会检查依赖视图中的规则以保持一致性。为了确定检查的范围，mysql提供了两个选项：cascaded 和 local，<strong>默认值为cascaded(级联)</strong>。</p>
<div class="note blue icon-padding modern"><i class="note-icon fas fa-bullhorn"></i><p><strong>注意：</strong></p>
<ul>
<li><p><strong>只有添加了with check option的视图才会在插入时进行where条件的检查，没有检查时直接会添加成功到表</strong></p>
</li>
<li><p><strong>插入的数据是存放到基表中的，视图中不存放数据</strong></p>
</li>
</ul>
</div>

<h4 id="CASCADED-级联"><a href="#CASCADED-级联" class="headerlink" title="CASCADED(级联)"></a>CASCADED(级联)</h4><p><strong>cascade 会去递归检查当前视图以及创建时依赖的视图，并且看是否加了检查选项，如果其依赖的视图中没有加入检查选项，则会将cascaded向下传递，使其向下的视图都加上检查选项使其都能检查</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建一个视图</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">view</span> stu_1 <span class="keyword">as</span> <span class="keyword">select</span> id,name <span class="keyword">from</span> student <span class="keyword">where</span> id <span class="operator">&lt;=</span><span class="number">20</span>  </span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> stu_1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert into</span> stu_1 <span class="keyword">values</span>(<span class="number">6</span>,<span class="string">&#x27;TOM&#x27;</span>)</span><br><span class="line"><span class="comment">-- 成功添加到student中</span></span><br><span class="line"><span class="keyword">insert into</span> stu_1 <span class="keyword">values</span>(<span class="number">30</span>,<span class="string">&#x27;TOM&#x27;</span>)</span><br><span class="line"><span class="comment">-- 添加成功到student中，用select搜索该视图中找不到该数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 添加cascaded选项后</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">view</span> stu_1 <span class="keyword">as</span> <span class="keyword">select</span> id,name <span class="keyword">from</span> student <span class="keyword">where</span> id <span class="operator">&lt;=</span><span class="number">20</span> <span class="keyword">with</span> <span class="keyword">cascaded</span> <span class="keyword">check</span> option;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert into</span> stu_1 <span class="keyword">values</span>(<span class="number">30</span>,<span class="string">&#x27;TOM&#x27;</span>)</span><br><span class="line"><span class="comment">-- 添加失败，因为id&gt;20，故会阻止该数据的添加</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">view</span> stu_1 <span class="keyword">as</span> <span class="keyword">select</span> id,name <span class="keyword">from</span> student <span class="keyword">where</span> id <span class="operator">&lt;=</span><span class="number">20</span>  </span><br><span class="line"><span class="comment">-- 由于stu_2使用cascaded检查选项，则stu_1也会继承到该检查选项</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">view</span> stu_2 <span class="keyword">as</span> <span class="keyword">select</span> id,name <span class="keyword">from</span> student <span class="keyword">where</span> id <span class="operator">&gt;=</span><span class="number">10</span> <span class="keyword">with</span> <span class="keyword">cascaded</span> <span class="keyword">check</span> option</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">view</span> stu_3 <span class="keyword">as</span> <span class="keyword">select</span> id,name <span class="keyword">from</span> student <span class="keyword">where</span> id <span class="operator">&lt;=</span><span class="number">15</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">insert into</span> stu_3 <span class="keyword">values</span>(<span class="number">11</span>,<span class="string">&#x27;tom&#x27;</span>);</span><br><span class="line"><span class="comment">-- 插入成功</span></span><br><span class="line"><span class="keyword">insert into</span> stu_3 <span class="keyword">values</span>(<span class="number">17</span>,<span class="string">&#x27;tom&#x27;</span>);</span><br><span class="line"><span class="comment">-- 插入成功，stu_3没有检查选项，不会检查</span></span><br><span class="line"><span class="keyword">insert into</span> stu_3 <span class="keyword">values</span>(<span class="number">28</span>,<span class="string">&#x27;tom&#x27;</span>);</span><br><span class="line"><span class="comment">-- 插入失败，stu_3没有检查选项，直接到依赖视图stu_2中，stu_2中有检查选项并且是cascaded，满足id&gt;=10,递归进入stu_1中，由于stu_1继承到了cascaded, 会进行判断,不满足id&lt;=20，阻止该数据插入.</span></span><br></pre></td></tr></table></figure>

<h4 id="LOCAL"><a href="#LOCAL" class="headerlink" title="LOCAL"></a>LOCAL</h4><p><strong>local 会去递归检查当前视图以及创建时依赖的视图，并且看是否加了检查选项，如果有，则进行条件的检查看是否满足条件，如果没有则不进行检查继续递归</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建视图1,没有依赖视图，没有检查选项</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">view</span> stu_1 <span class="keyword">as</span> <span class="keyword">select</span> id,name <span class="keyword">from</span>  student <span class="keyword">where</span> id<span class="operator">&lt;=</span><span class="number">15</span>;</span><br><span class="line"><span class="comment">-- 创建视图2，依赖于视图1,没有检查选项</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">view</span> stu_2 <span class="keyword">as</span> <span class="keyword">select</span> id,name <span class="keyword">from</span> stu_1 <span class="keyword">where</span> id <span class="operator">&gt;=</span> <span class="number">10</span> ;</span><br><span class="line"><span class="comment">-- 创建视图3，依赖于视图2,设置local检查选项</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">view</span> stu_3 <span class="keyword">as</span> <span class="keyword">select</span> id,name <span class="keyword">from</span> stu_2 <span class="keyword">where</span> id <span class="operator">&lt;</span> <span class="number">20</span> <span class="keyword">with</span> <span class="keyword">local</span> <span class="keyword">check</span> option;</span><br><span class="line"></span><br><span class="line"><span class="keyword">insert into</span> stu_3 <span class="keyword">values</span>(<span class="number">13</span>,<span class="string">&#x27;TOM&#x27;</span>);</span><br><span class="line"><span class="comment">-- 由于stu_3设置了检查选项,该语句会先判断id&lt;20(如果没设置就不会判断而是会直接进入stu_2中),然后递归到stu_2发现stu_2没有添加检查选项，则不进行判断id&gt;=10，如果添加了，则会判断id&gt;=10，再依次递归到stu_1，直到没有依赖其他视图建立的视图为止</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 如果任意一次条件判断不满足则会插入失败</span></span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i.postimg.cc/fbN6bFqP/20220206101541-14a48.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i.postimg.cc/fbN6bFqP/20220206101541-14a48.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">THEDI</div><div class="post-copyright__author_desc">我想睡到12点!</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://www.thekqd.top/2023/09/16/2023-09-16-MySQL%E9%80%9A%E7%94%A8%E8%AF%AD%E6%B3%95%E5%8F%8A%E6%93%8D%E4%BD%9C/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://www.thekqd.top/2023/09/16/2023-09-16-MySQL%E9%80%9A%E7%94%A8%E8%AF%AD%E6%B3%95%E5%8F%8A%E6%93%8D%E4%BD%9C/')">MySQL通用语法及操作</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/null" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/null" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/null" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://www.thekqd.top/2023/09/16/2023-09-16-MySQL%E9%80%9A%E7%94%A8%E8%AF%AD%E6%B3%95%E5%8F%8A%E6%93%8D%E4%BD%9C/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=MySQL通用语法及操作&amp;url=https://www.thekqd.top/2023/09/16/2023-09-16-MySQL%E9%80%9A%E7%94%A8%E8%AF%AD%E6%B3%95%E5%8F%8A%E6%93%8D%E4%BD%9C/&amp;pic=/assets/2.webp" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://www.thekqd.top" target="_blank">THEDI的仓库</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/MySQL/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>MySQL<span class="tagsPageCount">2</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="/assets/98.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/09/16/2023-09-16-MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/assets/2.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">MySQl安装</div></div></a></div><div class="next-post pull-right"><a href="/2023/11/01/2023-11-01-%E4%B8%83%E5%A4%A7%E6%9F%A5%E6%89%BE%E7%AE%97%E6%B3%95/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/assets/22.webp" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">查找算法</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2023/09/16/2023-09-16-MySQL%E6%95%B0%E6%8D%AE%E5%BA%93/" title="MySQl安装"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/assets/2.webp" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2023-09-16</div><div class="title">MySQl安装</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://i.postimg.cc/fbN6bFqP/20220206101541-14a48.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/08/24/64e6ce9c507bb.png" alt="status"/></div></div><div class="author-info__description"></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">THEDI</h1><div class="author-info__desc">我想睡到12点!</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="/assets/QRCode.jpg" target="_blank" title="微信"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-weixin"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/" target="_blank" title="B站"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-bilibili"></use></svg></a><a class="social-icon faa-parent animated-hover" href="mailto:1244381125@qq.com" target="_blank" title="QQ邮箱"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-youxiang"></use></svg></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">不要偷看我的博客!</div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(null) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E7%AF%87"><span class="toc-number">1.</span> <span class="toc-text">基础篇</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%E9%80%9A%E7%94%A8%E8%AF%AD%E6%B3%95"><span class="toc-number">1.1.</span> <span class="toc-text">SQL通用语法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%E5%88%86%E7%B1%BB"><span class="toc-number">1.2.</span> <span class="toc-text">SQL分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.3.</span> <span class="toc-text">SQL数据类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">1.4.</span> <span class="toc-text">SQL运算符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL%E4%B8%83%E5%A4%A7%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.5.</span> <span class="toc-text">SQL七大约束</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DDL-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C%E5%92%8C%E8%A1%A8%E6%93%8D%E4%BD%9C"><span class="toc-number">1.6.</span> <span class="toc-text">DDL(数据库操作和表操作)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="toc-number">1.6.1.</span> <span class="toc-text">数据库操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.6.1.1.</span> <span class="toc-text">查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA"><span class="toc-number">1.6.1.2.</span> <span class="toc-text">创建</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4"><span class="toc-number">1.6.1.3.</span> <span class="toc-text">删除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">1.6.1.4.</span> <span class="toc-text">使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B"><span class="toc-number">1.6.1.5.</span> <span class="toc-text">查看</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9"><span class="toc-number">1.6.1.6.</span> <span class="toc-text">修改</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E6%93%8D%E4%BD%9C"><span class="toc-number">1.6.2.</span> <span class="toc-text">表操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2-1"><span class="toc-number">1.6.2.1.</span> <span class="toc-text">查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-1"><span class="toc-number">1.6.2.2.</span> <span class="toc-text">创建</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9-1"><span class="toc-number">1.6.2.3.</span> <span class="toc-text">修改</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4-1"><span class="toc-number">1.6.2.4.</span> <span class="toc-text">删除</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DML-%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C"><span class="toc-number">1.7.</span> <span class="toc-text">DML(数据操作)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0"><span class="toc-number">1.7.1.</span> <span class="toc-text">添加</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="toc-number">1.7.2.</span> <span class="toc-text">修改数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DQL-%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.8.</span> <span class="toc-text">DQL(查询)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.8.1.</span> <span class="toc-text">基础查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.8.2.</span> <span class="toc-text">条件查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="toc-number">1.8.3.</span> <span class="toc-text">聚合函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.8.4.</span> <span class="toc-text">分组查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.8.5.</span> <span class="toc-text">排序查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.8.6.</span> <span class="toc-text">分页查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#DQL%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="toc-number">1.8.7.</span> <span class="toc-text">DQL执行顺序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DCL-%E7%AE%A1%E7%90%86"><span class="toc-number">1.9.</span> <span class="toc-text">DCL(管理)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86"><span class="toc-number">1.9.1.</span> <span class="toc-text">用户管理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E7%94%A8%E6%88%B7"><span class="toc-number">1.9.1.1.</span> <span class="toc-text">查询用户</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7"><span class="toc-number">1.9.1.2.</span> <span class="toc-text">创建用户</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%E5%AF%86%E7%A0%81"><span class="toc-number">1.9.1.3.</span> <span class="toc-text">修改用户密码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7"><span class="toc-number">1.9.1.4.</span> <span class="toc-text">删除用户</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6"><span class="toc-number">1.9.2.</span> <span class="toc-text">权限控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%9D%83%E9%99%90"><span class="toc-number">1.9.2.1.</span> <span class="toc-text">查询权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%88%E4%BA%88%E6%9D%83%E9%99%90"><span class="toc-number">1.9.2.2.</span> <span class="toc-text">授予权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%92%A4%E9%94%80%E6%9D%83%E9%99%90"><span class="toc-number">1.9.2.3.</span> <span class="toc-text">撤销权限</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-number">1.10.</span> <span class="toc-text">函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="toc-number">1.10.1.</span> <span class="toc-text">字符串函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#CONCAT"><span class="toc-number">1.10.1.1.</span> <span class="toc-text">CONCAT</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#LOWER"><span class="toc-number">1.10.1.2.</span> <span class="toc-text">LOWER</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#UPPER"><span class="toc-number">1.10.1.3.</span> <span class="toc-text">UPPER</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#LPAD"><span class="toc-number">1.10.1.4.</span> <span class="toc-text">LPAD</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RPAD"><span class="toc-number">1.10.1.5.</span> <span class="toc-text">RPAD</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TRIM"><span class="toc-number">1.10.1.6.</span> <span class="toc-text">TRIM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SUBSTRING"><span class="toc-number">1.10.1.7.</span> <span class="toc-text">SUBSTRING</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%80%BC%E5%87%BD%E6%95%B0"><span class="toc-number">1.10.2.</span> <span class="toc-text">数值函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#CEIL"><span class="toc-number">1.10.2.1.</span> <span class="toc-text">CEIL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#FLOOR"><span class="toc-number">1.10.2.2.</span> <span class="toc-text">FLOOR</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MOD"><span class="toc-number">1.10.2.3.</span> <span class="toc-text">MOD</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RAND"><span class="toc-number">1.10.2.4.</span> <span class="toc-text">RAND</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ROUND"><span class="toc-number">1.10.2.5.</span> <span class="toc-text">ROUND</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-number">1.10.3.</span> <span class="toc-text">日期函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#CURDATE"><span class="toc-number">1.10.3.1.</span> <span class="toc-text">CURDATE</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CURTIME"><span class="toc-number">1.10.4.</span> <span class="toc-text">CURTIME</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#NOW"><span class="toc-number">1.10.4.1.</span> <span class="toc-text">NOW</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#YEAR"><span class="toc-number">1.10.4.2.</span> <span class="toc-text">YEAR</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MONTH"><span class="toc-number">1.10.4.3.</span> <span class="toc-text">MONTH</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DAY"><span class="toc-number">1.10.4.4.</span> <span class="toc-text">DAY</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DATE-ADD"><span class="toc-number">1.10.4.5.</span> <span class="toc-text">DATE_ADD</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DATEDIFF"><span class="toc-number">1.10.4.6.</span> <span class="toc-text">DATEDIFF</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E5%87%BD%E6%95%B0"><span class="toc-number">1.10.5.</span> <span class="toc-text">流程函数</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#IF"><span class="toc-number">1.10.5.1.</span> <span class="toc-text">IF</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#IFNULL"><span class="toc-number">1.10.5.2.</span> <span class="toc-text">IFNULL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CASE-WHEN"><span class="toc-number">1.10.5.3.</span> <span class="toc-text">CASE WHEN</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E5%85%B3%E7%B3%BB"><span class="toc-number">1.11.</span> <span class="toc-text">多表关系</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">1.11.1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.11.2.</span> <span class="toc-text">内连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.11.3.</span> <span class="toc-text">外连接</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%A6%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.11.3.1.</span> <span class="toc-text">左外连接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%B3%E5%A4%96%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.11.3.2.</span> <span class="toc-text">右外连接</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E8%BF%9E%E6%8E%A5"><span class="toc-number">1.11.4.</span> <span class="toc-text">自连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.11.5.</span> <span class="toc-text">联合查询</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.11.6.</span> <span class="toc-text">子查询</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%87%E9%87%8F%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.11.6.1.</span> <span class="toc-text">标量子查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%97%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.11.6.2.</span> <span class="toc-text">列子查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%8C%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.11.6.3.</span> <span class="toc-text">行子查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.11.6.4.</span> <span class="toc-text">表子查询</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%AE%80%E4%BB%8B"><span class="toc-number">1.12.</span> <span class="toc-text">事务简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E6%93%8D%E4%BD%9C"><span class="toc-number">1.12.1.</span> <span class="toc-text">事务操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%B8%80"><span class="toc-number">1.12.1.1.</span> <span class="toc-text">方式一</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%BA%8C"><span class="toc-number">1.12.1.2.</span> <span class="toc-text">方式二</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%9B%9B%E5%A4%A7%E7%89%B9%E6%80%A7-ACID"><span class="toc-number">1.12.2.</span> <span class="toc-text">事务的四大特性(ACID)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B9%B6%E5%8F%91%E4%BA%8B%E5%8A%A1%E9%97%AE%E9%A2%98"><span class="toc-number">1.12.3.</span> <span class="toc-text">并发事务问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB"><span class="toc-number">1.12.4.</span> <span class="toc-text">事务隔离级别</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%9B%E9%98%B6%E7%AF%87"><span class="toc-number">2.</span> <span class="toc-text">进阶篇</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95"><span class="toc-number">2.1.</span> <span class="toc-text">索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%BB%93%E6%9E%84"><span class="toc-number">2.1.1.</span> <span class="toc-text">索引结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E5%88%86%E7%B1%BB"><span class="toc-number">2.1.2.</span> <span class="toc-text">索引分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E8%AF%AD%E6%B3%95"><span class="toc-number">2.1.3.</span> <span class="toc-text">索引语法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95"><span class="toc-number">2.1.3.1.</span> <span class="toc-text">创建索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E7%B4%A2%E5%BC%95"><span class="toc-number">2.1.3.2.</span> <span class="toc-text">查看索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E7%B4%A2%E5%BC%95"><span class="toc-number">2.1.3.3.</span> <span class="toc-text">修改索引</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95"><span class="toc-number">2.1.3.4.</span> <span class="toc-text">删除索引</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE"><span class="toc-number">2.2.</span> <span class="toc-text">视图</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E8%AF%AD%E6%B3%95"><span class="toc-number">2.2.1.</span> <span class="toc-text">视图语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E7%9A%84%E6%A3%80%E6%9F%A5%E9%80%89%E9%A1%B9"><span class="toc-number">2.2.2.</span> <span class="toc-text">视图的检查选项</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#CASCADED-%E7%BA%A7%E8%81%94"><span class="toc-number">2.2.2.1.</span> <span class="toc-text">CASCADED(级联)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#LOCAL"><span class="toc-number">2.2.2.2.</span> <span class="toc-text">LOCAL</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/06/03/CMake%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="CMake学习笔记"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/assets/16.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CMake学习笔记"/></a><div class="content"><a class="title" href="/2025/06/03/CMake%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" title="CMake学习笔记">CMake学习笔记</a><time datetime="2025-06-03T06:15:03.000Z" title="发表于 2025-06-03 14:15:03">2025-06-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/05/23/2025-05-23-%E7%94%B5%E6%BA%90%E8%BD%AC%E6%8D%A2%E8%8A%AF%E7%89%87/" title="电源转换芯片"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/assets/98.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="电源转换芯片"/></a><div class="content"><a class="title" href="/2025/05/23/2025-05-23-%E7%94%B5%E6%BA%90%E8%BD%AC%E6%8D%A2%E8%8A%AF%E7%89%87/" title="电源转换芯片">电源转换芯片</a><time datetime="2025-05-23T09:47:26.000Z" title="发表于 2025-05-23 17:47:26">2025-05-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/05/23/2025-05-23-%E7%94%B5%E6%BA%90%E7%AE%A1%E7%90%86%E8%8A%AF%E7%89%87/" title="电源管理芯片"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/assets/20.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="电源管理芯片"/></a><div class="content"><a class="title" href="/2025/05/23/2025-05-23-%E7%94%B5%E6%BA%90%E7%AE%A1%E7%90%86%E8%8A%AF%E7%89%87/" title="电源管理芯片">电源管理芯片</a><time datetime="2025-05-23T09:47:18.000Z" title="发表于 2025-05-23 17:47:18">2025-05-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/05/23/2025-05-23-%E7%94%B5%E5%AE%B9%E7%9A%84%E4%BD%BF%E7%94%A8/" title="电容的使用"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/assets/99.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="电容的使用"/></a><div class="content"><a class="title" href="/2025/05/23/2025-05-23-%E7%94%B5%E5%AE%B9%E7%9A%84%E4%BD%BF%E7%94%A8/" title="电容的使用">电容的使用</a><time datetime="2025-05-23T09:46:44.000Z" title="发表于 2025-05-23 17:46:44">2025-05-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/05/23/2025-05-23-USB%E6%8E%A5%E5%8F%A3/" title="USB接口"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/assets/99.webp" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="USB接口"/></a><div class="content"><a class="title" href="/2025/05/23/2025-05-23-USB%E6%8E%A5%E5%8F%A3/" title="USB接口">USB接口</a><time datetime="2025-05-23T09:46:33.000Z" title="发表于 2025-05-23 17:46:33">2025-05-23</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div id="workboard"><img class="workSituationImg boardsign" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-上班摸鱼中.svg" alt="距离月入25k也就还差一个大佬带我~" title="距离月入25k也就还差一个大佬带我~"/><div id="runtimeTextTip"></div></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Frame-Hexo.svg" alt="博客框架为Hexo_v5.4.0"/></a><a class="github-badge" target="_blank" href="https://blog.anheyu.com/" style="margin-inline:5px" data-title="本站使用AnZhiYu主题" title="本站使用AnZhiYu主题"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.9/img/Theme-AnZhiYu-2E67D3.svg" alt="本站使用AnZhiYu主题"/></a><a class="github-badge" target="_blank" href="https://www.dogecloud.com/" style="margin-inline:5px" data-title="本站使用多吉云为静态资源提供CDN加速" title="本站使用多吉云为静态资源提供CDN加速"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/CDN-多吉云-3693F3.svg" alt="本站使用多吉云为静态资源提供CDN加速"/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" data-title="本站项目由Github托管" title="本站项目由Github托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.1.5/img/badge/Source-Github.svg" alt="本站项目由Github托管"/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@2.2.0/img/badge/Copyright-BY-NC-SA.svg" alt="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"/></a></p></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2022 - 2025 By <a class="footer-bar-link" href="/" title="THEDI" target="_blank">THEDI</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">26</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">9</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="安知鱼的博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="安知鱼的博客"/><span class="back-menu-item-text">安知鱼的博客</span></a><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/keqiudi/keqiudi.github.io" title="我的博客仓库"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="我的博客仓库"/><span class="back-menu-item-text">我的博客仓库</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/C/" style="font-size: 0.88rem;">C++<sup>2</sup></a><a href="/tags/CLion/" style="font-size: 0.88rem;">CLion<sup>1</sup></a><a href="/tags/Git/" style="font-size: 0.88rem;">Git<sup>1</sup></a><a href="/tags/Linux/" style="font-size: 0.88rem;">Linux<sup>8</sup></a><a href="/tags/MySQL/" style="font-size: 0.88rem;">MySQL<sup>2</sup></a><a href="/tags/QT/" style="font-size: 0.88rem;">QT<sup>1</sup></a><a href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/" style="font-size: 0.88rem;">嵌入式<sup>7</sup></a><a href="/tags/%E6%9E%84%E5%BB%BA%E5%B7%A5%E5%85%B7/" style="font-size: 0.88rem;">构建工具<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 0.88rem;">算法<sup>3</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.cbd.int/pangu@4.0.7/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (true){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("12/01/2022 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2022 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 THEDI 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script async="async">(function () {
  var grt = new Date("12/01/2022 00:00:00"); //设置网站上线时间
  var now = new Date();
  var dnum;
  var hnum;
  var mnum;
  var snum;
  var nowHour;

  // 计算并更新天数、小时数、分钟数和秒数
  function updateTime() {
    now = new Date(); // 更新 now 的值
    nowHour = now.getHours(); // 更新 nowHour 的值
    var days = (now - grt) / 1000 / 60 / 60 / 24;
    dnum = Math.floor(days);
    var hours = (now - grt) / 1000 / 60 / 60 - 24 * dnum;
    hnum = Math.floor(hours);
    if (String(hnum).length == 1) {
      hnum = "0" + hnum;
    }
    var minutes = (now - grt) / 1000 / 60 - 24 * 60 * dnum - 60 * hnum;
    mnum = Math.floor(minutes);
    if (String(mnum).length == 1) {
      mnum = "0" + mnum;
    }
    var seconds = (now - grt) / 1000 - 24 * 60 * 60 * dnum - 60 * 60 * hnum - 60 * mnum;
    snum = Math.round(seconds);
    if (String(snum).length == 1) {
      snum = "0" + snum;
    }
  }

  // 更新网页中显示的网站运行时间
  function updateHtml() {
    const footer = document.getElementById("footer");
    if (!footer) return
    let currentTimeHtml = "";
    if (nowHour < 18 && nowHour >= 9) {
      // 如果是上班时间，默认就是"安知鱼-上班摸鱼中.svg"图片，不需要更改
      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    } else {
      // 如果是下班时间，插入"安知鱼-下班啦.svg"图片
      let img = document.querySelector("#workboard .workSituationImg");
      if (img != null) {
        img.src = "https://npm.elemecdn.com/anzhiyu-blog@2.0.4/img/badge/安知鱼-下班啦.svg";
        img.title = "下班了就该开开心心的玩耍，嘿嘿~";
        img.alt = "下班了就该开开心心的玩耍，嘿嘿~";
      }

      currentTimeHtml = `本站居然运行了 ${dnum} 天<span id='runtime'> ${hnum} 小时 ${mnum} 分 ${snum} 秒 </span><i class='anzhiyufont anzhiyu-icon-heartbeat' style='color:red'></i>`;
    }

    if (document.getElementById("runtimeTextTip")) {
      document.getElementById("runtimeTextTip").innerHTML = currentTimeHtml;
    }
  }

  setInterval(() => {
    updateTime();
    updateHtml();
  }, 1000);
})();</script><script src="https://cdn.cbd.int/algoliasearch@4.18.0/dist/algoliasearch-lite.umd.js"></script><script src="https://cdn.cbd.int/instantsearch.js@4.60.0/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><script src="/js/anzhiyu/right_click_menu.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script async src="//at.alicdn.com/t/c/font_4169545_k8d3mxnig4s.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>